import{B as P,J as A,P as g,W as x,Ya as W,ba as p,f as S,ga as C,h as R,k as X,l as k,m as H,p as N,v as T}from"./chunk-IYURAQ6S.mjs";function $(t){let e={each(n){for(let i=0;i<t.frames?.length;i+=1){let r=t.frames[i];r&&n(r)}},addEventListener(n,i,r){return e.each(c=>{try{c.document.addEventListener(n,i,r)}catch{}}),()=>{try{e.removeEventListener(n,i,r)}catch{}}},removeEventListener(n,i,r){e.each(c=>{try{c.document.removeEventListener(n,i,r)}catch{}})}};return e}function j(t){let e=t.frameElement!=null?t.parent:null;return{addEventListener:(n,i,r)=>{try{e?.addEventListener(n,i,r)}catch{}return()=>{try{e?.removeEventListener(n,i,r)}catch{}}},removeEventListener:(n,i,r)=>{try{e?.removeEventListener(n,i,r)}catch{}}}}var F="pointerdown.outside",_="focus.outside";function z(t){for(let e of t)if(S(e)&&x(e))return!0;return!1}var M=t=>"clientY"in t;function G(t,e){if(!M(e)||!t)return!1;let n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function J(t,e){return t.y<=e.y&&e.y<=t.y+t.height&&t.x<=e.x&&e.x<=t.x+t.width}function U(t,e){if(!e||!M(t))return!1;let n=e.scrollHeight>e.clientHeight,i=n&&t.clientX>e.offsetLeft+e.clientWidth,r=e.scrollWidth>e.clientWidth,c=r&&t.clientY>e.offsetTop+e.clientHeight,h={x:e.offsetLeft,y:e.offsetTop,width:e.clientWidth+(n?16:0),height:e.clientHeight+(r?16:0)},w={x:t.clientX,y:t.clientY};return J(h,w)?i||c:!1}function K(t,e){let{exclude:n,onFocusOutside:i,onPointerDownOutside:r,onInteractOutside:c,defer:h,followControlledElements:w=!0}=e;if(!t)return;let E=k(t),I=H(t),v=$(I),L=j(I);function O(o,s){if(!S(s)||!s.isConnected||X(t,s)||G(t,o)||w&&N(t,s))return!1;let u=E.querySelector(`[aria-controls="${t.id}"]`);if(u){let l=C(u);if(U(o,l))return!1}let f=C(t);return U(o,f)?!1:!n?.(s)}let d=new Set,D=R(t?.getRootNode());function b(o){function s(u){let f=h&&!T()?p:m=>m(),l=u??o,Y=l?.composedPath?.()??[l?.target];f(()=>{let m=D?Y[0]:P(o);if(!(!t||!O(o,m))){if(r||c){let B=W(r,c);t.addEventListener(F,B,{once:!0})}V(t,F,{bubbles:!1,cancelable:!0,detail:{originalEvent:l,contextmenu:A(l),focusable:z(Y),target:m}})}})}o.pointerType==="touch"?(d.forEach(u=>u()),d.add(g(E,"click",s,{once:!0})),d.add(L.addEventListener("click",s,{once:!0})),d.add(v.addEventListener("click",s,{once:!0}))):s()}let a=new Set,q=setTimeout(()=>{a.add(g(E,"pointerdown",b,!0)),a.add(L.addEventListener("pointerdown",b,!0)),a.add(v.addEventListener("pointerdown",b,!0))},0);function y(o){(h?p:u=>u())(()=>{let u=o?.composedPath?.()??[o?.target],f=D?u[0]:P(o);if(!(!t||!O(o,f))){if(i||c){let l=W(i,c);t.addEventListener(_,l,{once:!0})}V(t,_,{bubbles:!1,cancelable:!0,detail:{originalEvent:o,contextmenu:!1,focusable:x(f),target:f}})}})}return T()||(a.add(g(E,"focusin",y,!0)),a.add(L.addEventListener("focusin",y,!0)),a.add(v.addEventListener("focusin",y,!0))),()=>{clearTimeout(q),d.forEach(o=>o()),a.forEach(o=>o())}}function tt(t,e){let{defer:n}=e,i=n?p:c=>c(),r=[];return r.push(i(()=>{let c=typeof t=="function"?t():t;r.push(K(c,e))})),()=>{r.forEach(c=>c?.())}}function V(t,e,n){let i=t.ownerDocument.defaultView||window,r=new i.CustomEvent(e,n);return t.dispatchEvent(r)}export{tt as a};
