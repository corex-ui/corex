import{Ia as T,Ka as E,Ma as R,Oa as I,Ra as N,Ua as m}from"./chunk-IYURAQ6S.mjs";var F=Object.defineProperty,K=(s,o,t)=>o in s?F(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,r=(s,o,t)=>K(s,typeof o!="symbol"?o+"":o,t),V={itemToValue(s){return typeof s=="string"?s:N(s)&&m(s,"value")?s.value:""},itemToString(s){return typeof s=="string"?s:N(s)&&m(s,"label")?s.label:V.itemToValue(s)},isItemDisabled(s){return N(s)&&m(s,"disabled")?!!s.disabled:!1}},q=class k{constructor(o){this.options=o,r(this,"items"),r(this,"indexMap",null),r(this,"copy",t=>new k({...this.options,items:t??[...this.items]})),r(this,"isEqual",t=>I(this.items,t.items)),r(this,"setItems",t=>this.copy(t)),r(this,"getValues",(t=this.items)=>{let e=[];for(let i of t){let n=this.getItemValue(i);n!=null&&e.push(n)}return e}),r(this,"find",t=>{if(t==null)return null;let e=this.indexOf(t);return e!==-1?this.at(e):null}),r(this,"findMany",t=>{let e=[];for(let i of t){let n=this.find(i);n!=null&&e.push(n)}return e}),r(this,"at",t=>{if(!this.options.groupBy&&!this.options.groupSort)return this.items[t]??null;let e=0,i=this.group();for(let[,n]of i)for(let l of n){if(e===t)return l;e++}return null}),r(this,"sortFn",(t,e)=>{let i=this.indexOf(t),n=this.indexOf(e);return(i??0)-(n??0)}),r(this,"sort",t=>[...t].sort(this.sortFn.bind(this))),r(this,"getItemValue",t=>t==null?null:this.options.itemToValue?.(t)??V.itemToValue(t)),r(this,"getItemDisabled",t=>t==null?!1:this.options.isItemDisabled?.(t)??V.isItemDisabled(t)),r(this,"stringifyItem",t=>t==null?null:this.options.itemToString?.(t)??V.itemToString(t)),r(this,"stringify",t=>t==null?null:this.stringifyItem(this.find(t))),r(this,"stringifyItems",(t,e=", ")=>{let i=[];for(let n of t){let l=this.stringifyItem(n);l!=null&&i.push(l)}return i.join(e)}),r(this,"stringifyMany",(t,e)=>this.stringifyItems(this.findMany(t),e)),r(this,"has",t=>this.indexOf(t)!==-1),r(this,"hasItem",t=>t==null?!1:this.has(this.getItemValue(t))),r(this,"group",()=>{let{groupBy:t,groupSort:e}=this.options;if(!t)return[["",[...this.items]]];let i=new Map;this.items.forEach((l,h)=>{let u=t(l,h);i.has(u)||i.set(u,[]),i.get(u).push(l)});let n=Array.from(i.entries());return e&&n.sort(([l],[h])=>{if(typeof e=="function")return e(l,h);if(Array.isArray(e)){let u=e.indexOf(l),c=e.indexOf(h);return u===-1?1:c===-1?-1:u-c}return e==="asc"?l.localeCompare(h):e==="desc"?h.localeCompare(l):0}),n}),r(this,"getNextValue",(t,e=1,i=!1)=>{let n=this.indexOf(t);if(n===-1)return null;for(n=i?Math.min(n+e,this.size-1):n+e;n<=this.size&&this.getItemDisabled(this.at(n));)n++;return this.getItemValue(this.at(n))}),r(this,"getPreviousValue",(t,e=1,i=!1)=>{let n=this.indexOf(t);if(n===-1)return null;for(n=i?Math.max(n-e,0):n-e;n>=0&&this.getItemDisabled(this.at(n));)n--;return this.getItemValue(this.at(n))}),r(this,"indexOf",t=>{if(t==null)return-1;if(!this.options.groupBy&&!this.options.groupSort)return this.items.findIndex(e=>this.getItemValue(e)===t);if(!this.indexMap){this.indexMap=new Map;let e=0,i=this.group();for(let[,n]of i)for(let l of n){let h=this.getItemValue(l);h!=null&&this.indexMap.set(h,e),e++}}return this.indexMap.get(t)??-1}),r(this,"getByText",(t,e)=>{let i=e!=null?this.indexOf(e):-1,n=t.length===1;for(let l=0;l<this.items.length;l++){let h=this.items[(i+l+1)%this.items.length];if(!(n&&this.getItemValue(h)===e)&&!this.getItemDisabled(h)&&G(this.stringifyItem(h),t))return h}}),r(this,"search",(t,e)=>{let{state:i,currentValue:n,timeout:l=350}=e,h=i.keysSoFar+t,c=h.length>1&&Array.from(h).every(C=>C===h[0])?h[0]:h,a=this.getByText(c,n),d=this.getItemValue(a);function p(){clearTimeout(i.timer),i.timer=-1}function f(C){i.keysSoFar=C,p(),C!==""&&(i.timer=+setTimeout(()=>{f(""),p()},l))}return f(h),d}),r(this,"update",(t,e)=>{let i=this.indexOf(t);return i===-1?this:this.copy([...this.items.slice(0,i),e,...this.items.slice(i+1)])}),r(this,"upsert",(t,e,i="append")=>{let n=this.indexOf(t);return n===-1?(i==="append"?this.append:this.prepend)(e):this.copy([...this.items.slice(0,n),e,...this.items.slice(n+1)])}),r(this,"insert",(t,...e)=>this.copy(y(this.items,t,...e))),r(this,"insertBefore",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(y(this.items,i,...e))}),r(this,"insertAfter",(t,...e)=>{let i=this.indexOf(t);if(i===-1)if(this.items.length===0)i=0;else return this;return this.copy(y(this.items,i+1,...e))}),r(this,"prepend",(...t)=>this.copy(y(this.items,0,...t))),r(this,"append",(...t)=>this.copy(y(this.items,this.items.length,...t))),r(this,"filter",t=>{let e=this.items.filter((i,n)=>t(this.stringifyItem(i),n,i));return this.copy(e)}),r(this,"remove",(...t)=>{let e=t.map(i=>typeof i=="string"?i:this.getItemValue(i));return this.copy(this.items.filter(i=>{let n=this.getItemValue(i);return n==null?!1:!e.includes(n)}))}),r(this,"move",(t,e)=>{let i=this.indexOf(t);return i===-1?this:this.copy(v(this.items,[i],e))}),r(this,"moveBefore",(t,...e)=>{let i=this.items.findIndex(l=>this.getItemValue(l)===t);if(i===-1)return this;let n=e.map(l=>this.items.findIndex(h=>this.getItemValue(h)===l)).sort((l,h)=>l-h);return this.copy(v(this.items,n,i))}),r(this,"moveAfter",(t,...e)=>{let i=this.items.findIndex(l=>this.getItemValue(l)===t);if(i===-1)return this;let n=e.map(l=>this.items.findIndex(h=>this.getItemValue(h)===l)).sort((l,h)=>l-h);return this.copy(v(this.items,n,i+1))}),r(this,"reorder",(t,e)=>this.copy(v(this.items,[t],e))),r(this,"compareValue",(t,e)=>{let i=this.indexOf(t),n=this.indexOf(e);return i<n?-1:i>n?1:0}),r(this,"range",(t,e)=>{let i=[],n=t;for(;n!=null;){if(this.find(n)&&i.push(n),n===e)return i;n=this.getNextValue(n)}return[]}),r(this,"getValueRange",(t,e)=>t&&e?this.compareValue(t,e)<=0?this.range(t,e):this.range(e,t):[]),r(this,"toString",()=>{let t="";for(let e of this.items){let i=this.getItemValue(e),n=this.stringifyItem(e),l=this.getItemDisabled(e),h=[i,n,l].filter(Boolean).join(":");t+=h+","}return t}),r(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[...o.items]}get size(){return this.items.length}get firstValue(){let o=0;for(;this.getItemDisabled(this.at(o));)o++;return this.getItemValue(this.at(o))}get lastValue(){let o=this.size-1;for(;this.getItemDisabled(this.at(o));)o--;return this.getItemValue(this.at(o))}*[Symbol.iterator](){yield*this.items}},G=(s,o)=>!!s?.toLowerCase().startsWith(o.toLowerCase());function y(s,o,...t){return[...s.slice(0,o),...t,...s.slice(o)]}function v(s,o,t){o=[...o].sort((i,n)=>i-n);let e=o.map(i=>s[i]);for(let i=o.length-1;i>=0;i--)s=[...s.slice(0,o[i]),...s.slice(o[i]+1)];return t=Math.max(0,t-o.filter(i=>i<t).length),[...s.slice(0,t),...e,...s.slice(t)]}var ht=class extends q{constructor(s){let{columnCount:o}=s;super(s),r(this,"columnCount"),r(this,"rows",null),r(this,"getRows",()=>(this.rows||(this.rows=R([...this.items],this.columnCount)),this.rows)),r(this,"getRowCount",()=>Math.ceil(this.items.length/this.columnCount)),r(this,"getCellIndex",(t,e)=>t*this.columnCount+e),r(this,"getCell",(t,e)=>this.at(this.getCellIndex(t,e))),r(this,"getValueCell",t=>{let e=this.indexOf(t);if(e===-1)return null;let i=Math.floor(e/this.columnCount),n=e%this.columnCount;return{row:i,column:n}}),r(this,"getLastEnabledColumnIndex",t=>{for(let e=this.columnCount-1;e>=0;e--){let i=this.getCell(t,e);if(i&&!this.getItemDisabled(i))return e}return null}),r(this,"getFirstEnabledColumnIndex",t=>{for(let e=0;e<this.columnCount;e++){let i=this.getCell(t,e);if(i&&!this.getItemDisabled(i))return e}return null}),r(this,"getPreviousRowValue",(t,e=!1)=>{let i=this.getValueCell(t);if(i===null)return null;let n=this.getRows(),l=n.length,h=i.row,u=i.column;for(let c=1;c<=l;c++){h=E(n,h,{loop:e});let a=n[h];if(!a)continue;if(!a[u]){let f=this.getLastEnabledColumnIndex(h);f!=null&&(u=f)}let p=this.getCell(h,u);if(!this.getItemDisabled(p))return this.getItemValue(p)}return this.firstValue}),r(this,"getNextRowValue",(t,e=!1)=>{let i=this.getValueCell(t);if(i===null)return null;let n=this.getRows(),l=n.length,h=i.row,u=i.column;for(let c=1;c<=l;c++){h=T(n,h,{loop:e});let a=n[h];if(!a)continue;if(!a[u]){let f=this.getLastEnabledColumnIndex(h);f!=null&&(u=f)}let p=this.getCell(h,u);if(!this.getItemDisabled(p))return this.getItemValue(p)}return this.lastValue}),this.columnCount=o}};function ut(s){return m(s,"columnCount")&&m(s,"getRows")}var ct=class w extends Set{constructor(o=[]){super(o),r(this,"selectionMode","single"),r(this,"deselectable",!0),r(this,"copy",()=>{let t=new w([...this]);return this.sync(t)}),r(this,"sync",t=>(t.selectionMode=this.selectionMode,t.deselectable=this.deselectable,t)),r(this,"isEmpty",()=>this.size===0),r(this,"isSelected",t=>this.selectionMode==="none"||t==null?!1:this.has(t)),r(this,"canSelect",(t,e)=>this.selectionMode!=="none"||!t.getItemDisabled(t.find(e))),r(this,"firstSelectedValue",t=>{let e=null;for(let i of this)(!e||t.compareValue(i,e)<0)&&(e=i);return e}),r(this,"lastSelectedValue",t=>{let e=null;for(let i of this)(!e||t.compareValue(i,e)>0)&&(e=i);return e}),r(this,"extendSelection",(t,e,i)=>{if(this.selectionMode==="none")return this;if(this.selectionMode==="single")return this.replaceSelection(t,i);let n=this.copy(),l=Array.from(this).pop();for(let h of t.getValueRange(e,l??i))n.delete(h);for(let h of t.getValueRange(i,e))this.canSelect(t,h)&&n.add(h);return n}),r(this,"toggleSelection",(t,e)=>{if(this.selectionMode==="none")return this;if(this.selectionMode==="single"&&!this.isSelected(e))return this.replaceSelection(t,e);let i=this.copy();return i.has(e)?i.delete(e):i.canSelect(t,e)&&i.add(e),i}),r(this,"replaceSelection",(t,e)=>{if(this.selectionMode==="none")return this;if(e==null)return this;if(!this.canSelect(t,e))return this;let i=new w([e]);return this.sync(i)}),r(this,"setSelection",t=>{if(this.selectionMode==="none")return this;let e=new w;for(let i of t)if(i!=null&&(e.add(i),this.selectionMode==="single"))break;return this.sync(e)}),r(this,"clearSelection",()=>{let t=this.copy();return t.deselectable&&t.size>0&&t.clear(),t}),r(this,"select",(t,e,i)=>this.selectionMode==="none"?this:this.selectionMode==="single"?this.isSelected(e)&&this.deselectable?this.toggleSelection(t,e):this.replaceSelection(t,e):this.selectionMode==="multiple"||i?this.toggleSelection(t,e):this.replaceSelection(t,e)),r(this,"deselect",t=>{let e=this.copy();return e.delete(t),e}),r(this,"isEqual",t=>I(Array.from(this),Array.from(t)))}};function O(s,o,t){for(let e=0;e<o.length;e++)s=t.getChildren(s,o.slice(e+1))[o[e]];return s}function J(s){let o=W(s),t=[],e=new Set;for(let i of o){let n=i.join();e.has(n)||(e.add(n),t.push(i))}return t}function P(s,o){for(let t=0;t<Math.min(s.length,o.length);t++){if(s[t]<o[t])return-1;if(s[t]>o[t])return 1}return s.length-o.length}function W(s){return s.sort(P)}function H(s,o){let t;return g(s,{...o,onEnter:(e,i)=>{if(o.predicate(e,i))return t=e,"stop"}}),t}function Q(s,o){let t=[];return g(s,{onEnter:(e,i)=>{o.predicate(e,i)&&t.push(e)},getChildren:o.getChildren}),t}function _(s,o){let t;return g(s,{onEnter:(e,i)=>{if(o.predicate(e,i))return t=[...i],"stop"},getChildren:o.getChildren}),t}function U(s,o){let t=o.initialResult;return g(s,{...o,onEnter:(e,i)=>{t=o.nextResult(t,e,i)}}),t}function X(s,o){return U(s,{...o,initialResult:[],nextResult:(t,e,i)=>(t.push(...o.transform(e,i)),t)})}function Y(s,o){let{predicate:t,create:e,getChildren:i}=o,n=(l,h)=>{let u=i(l,h),c=[];u.forEach((f,C)=>{let z=[...h,C],M=n(f,z);M&&c.push(M)});let a=h.length===0,d=t(l,h),p=c.length>0;return a||d||p?e(l,c,h):null};return n(s,[])||e(s,[],[])}function Z(s,o){let t=[],e=0,i=new Map,n=new Map;return g(s,{getChildren:o.getChildren,onEnter:(l,h)=>{i.has(l)||i.set(l,e++);let u=o.getChildren(l,h);u.forEach(f=>{n.has(f)||n.set(f,l),i.has(f)||i.set(f,e++)});let c=u.length>0?u.map(f=>i.get(f)):void 0,a=n.get(l),d=a?i.get(a):void 0,p=i.get(l);t.push({...l,_children:c,_parent:d,_index:p})}}),t}function $(s,o){return{type:"insert",index:s,nodes:o}}function tt(s){return{type:"remove",indexes:s}}function S(){return{type:"replace"}}function j(s){return[s.slice(0,-1),s[s.length-1]]}function B(s,o,t=new Map){let[e,i]=j(s);for(let l=e.length-1;l>=0;l--){let h=e.slice(0,l).join();switch(t.get(h)?.type){case"remove":continue}t.set(h,S())}let n=t.get(e.join());switch(n?.type){case"remove":t.set(e.join(),{type:"removeThenInsert",removeIndexes:n.indexes,insertIndex:i,insertNodes:o});break;default:t.set(e.join(),$(i,o))}return t}function A(s){let o=new Map,t=new Map;for(let e of s){let i=e.slice(0,-1).join(),n=t.get(i)??[];n.push(e[e.length-1]),t.set(i,n.sort((l,h)=>l-h))}for(let e of s)for(let i=e.length-2;i>=0;i--){let n=e.slice(0,i).join();o.has(n)||o.set(n,S())}for(let[e,i]of t)o.set(e,tt(i));return o}function et(s,o){let t=new Map,[e,i]=j(s);for(let n=e.length-1;n>=0;n--){let l=e.slice(0,n).join();t.set(l,S())}return t.set(e.join(),{type:"removeThenInsert",removeIndexes:[i],insertIndex:i,insertNodes:[o]}),t}function b(s,o,t){return it(s,{...t,getChildren:(e,i)=>{let n=i.join();switch(o.get(n)?.type){case"replace":case"remove":case"removeThenInsert":case"insert":return t.getChildren(e,i);default:return[]}},transform:(e,i,n)=>{let l=n.join(),h=o.get(l);switch(h?.type){case"remove":return t.create(e,i.filter((a,d)=>!h.indexes.includes(d)),n);case"removeThenInsert":let u=i.filter((a,d)=>!h.removeIndexes.includes(d)),c=h.removeIndexes.reduce((a,d)=>d<a?a-1:a,h.insertIndex);return t.create(e,D(u,c,0,...h.insertNodes),n);case"insert":return t.create(e,D(i,h.index,0,...h.nodes),n);case"replace":return t.create(e,i,n);default:return e}}})}function D(s,o,t,...e){return[...s.slice(0,o),...e,...s.slice(o+t)]}function it(s,o){let t={};return g(s,{...o,onLeave:(e,i)=>{let n=[0,...i],l=n.join(),h=o.transform(e,t[l]??[],i),u=n.slice(0,-1).join(),c=t[u]??[];c.push(h),t[u]=c}}),t[""][0]}function nt(s,o){let{nodes:t,at:e}=o;if(e.length===0)throw new Error("Can't insert nodes at the root");let i=B(e,t);return b(s,i,o)}function st(s,o){if(o.at.length===0)return o.node;let t=et(o.at,o.node);return b(s,t,o)}function rt(s,o){if(o.indexPaths.length===0)return s;for(let e of o.indexPaths)if(e.length===0)throw new Error("Can't remove the root node");let t=A(o.indexPaths);return b(s,t,o)}function ot(s,o){if(o.indexPaths.length===0)return s;for(let n of o.indexPaths)if(n.length===0)throw new Error("Can't move the root node");if(o.to.length===0)throw new Error("Can't move nodes to the root");let t=J(o.indexPaths),e=t.map(n=>O(s,n,o)),i=B(o.to,e,A(t));return b(s,i,o)}function g(s,o){let{onEnter:t,onLeave:e,getChildren:i}=o,n=[],l=[{node:s}],h=o.reuseIndexPath?()=>n:()=>n.slice();for(;l.length>0;){let u=l[l.length-1];if(u.state===void 0){let a=t?.(u.node,h());if(a==="stop")return;u.state=a==="skip"?-1:0}let c=u.children||i(u.node,h());if(u.children||(u.children=c),u.state!==-1){if(u.state<c.length){let d=u.state;n.push(d),l.push({node:c[d]}),u.state=d+1;continue}if(e?.(u.node,h())==="stop")return}n.pop(),l.pop()}}var at=class L{constructor(o){this.options=o,r(this,"rootNode"),r(this,"isEqual",t=>I(this.rootNode,t.rootNode)),r(this,"getNodeChildren",t=>this.options.nodeToChildren?.(t)??x.nodeToChildren(t)??[]),r(this,"resolveIndexPath",t=>typeof t=="string"?this.getIndexPath(t):t),r(this,"resolveNode",t=>{let e=this.resolveIndexPath(t);return e?this.at(e):void 0}),r(this,"getNodeChildrenCount",t=>this.options.nodeToChildrenCount?.(t)??x.nodeToChildrenCount(t)),r(this,"getNodeValue",t=>this.options.nodeToValue?.(t)??x.nodeToValue(t)),r(this,"getNodeDisabled",t=>this.options.isNodeDisabled?.(t)??x.isNodeDisabled(t)),r(this,"stringify",t=>{let e=this.findNode(t);return e?this.stringifyNode(e):null}),r(this,"stringifyNode",t=>this.options.nodeToString?.(t)??x.nodeToString(t)),r(this,"getFirstNode",(t=this.rootNode,e={})=>{let i;return g(t,{getChildren:this.getNodeChildren,onEnter:(n,l)=>{if(!this.isSameNode(n,t)){if(e.skip?.({value:this.getNodeValue(n),node:n,indexPath:l}))return"skip";if(!i&&l.length>0&&!this.getNodeDisabled(n))return i=n,"stop"}}}),i}),r(this,"getLastNode",(t=this.rootNode,e={})=>{let i;return g(t,{getChildren:this.getNodeChildren,onEnter:(n,l)=>{if(!this.isSameNode(n,t)){if(e.skip?.({value:this.getNodeValue(n),node:n,indexPath:l}))return"skip";l.length>0&&!this.getNodeDisabled(n)&&(i=n)}}}),i}),r(this,"at",t=>O(this.rootNode,t,{getChildren:this.getNodeChildren})),r(this,"findNode",(t,e=this.rootNode)=>H(e,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t})),r(this,"findNodes",(t,e=this.rootNode)=>{let i=new Set(t.filter(n=>n!=null));return Q(e,{getChildren:this.getNodeChildren,predicate:n=>i.has(this.getNodeValue(n))})}),r(this,"sort",t=>t.reduce((e,i)=>{let n=this.getIndexPath(i);return n&&e.push({value:i,indexPath:n}),e},[]).sort((e,i)=>P(e.indexPath,i.indexPath)).map(({value:e})=>e)),r(this,"getIndexPath",t=>_(this.rootNode,{getChildren:this.getNodeChildren,predicate:e=>this.getNodeValue(e)===t})),r(this,"getValue",t=>{let e=this.at(t);return e?this.getNodeValue(e):void 0}),r(this,"getValuePath",t=>{if(!t)return[];let e=[],i=[...t];for(;i.length>0;){let n=this.at(i);n&&e.unshift(this.getNodeValue(n)),i.pop()}return e}),r(this,"getDepth",t=>_(this.rootNode,{getChildren:this.getNodeChildren,predicate:i=>this.getNodeValue(i)===t})?.length??0),r(this,"isSameNode",(t,e)=>this.getNodeValue(t)===this.getNodeValue(e)),r(this,"isRootNode",t=>this.isSameNode(t,this.rootNode)),r(this,"contains",(t,e)=>!t||!e?!1:e.slice(0,t.length).every((i,n)=>t[n]===e[n])),r(this,"getNextNode",(t,e={})=>{let i=!1,n;return g(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(l,h)=>{if(this.isRootNode(l))return;let u=this.getNodeValue(l);if(e.skip?.({value:u,node:l,indexPath:h}))return u===t&&(i=!0),"skip";if(i&&!this.getNodeDisabled(l))return n=l,"stop";u===t&&(i=!0)}}),n}),r(this,"getPreviousNode",(t,e={})=>{let i,n=!1;return g(this.rootNode,{getChildren:this.getNodeChildren,onEnter:(l,h)=>{if(this.isRootNode(l))return;let u=this.getNodeValue(l);if(e.skip?.({value:u,node:l,indexPath:h}))return"skip";if(u===t)return n=!0,"stop";this.getNodeDisabled(l)||(i=l)}}),n?i:void 0}),r(this,"getParentNodes",t=>{let e=this.resolveIndexPath(t)?.slice();if(!e)return[];let i=[];for(;e.length>0;){e.pop();let n=this.at(e);n&&!this.isRootNode(n)&&i.unshift(n)}return i}),r(this,"getDescendantNodes",(t,e)=>{let i=this.resolveNode(t);if(!i)return[];let n=[];return g(i,{getChildren:this.getNodeChildren,onEnter:(l,h)=>{h.length!==0&&(!e?.withBranch&&this.isBranchNode(l)||n.push(l))}}),n}),r(this,"getDescendantValues",(t,e)=>this.getDescendantNodes(t,e).map(n=>this.getNodeValue(n))),r(this,"getParentIndexPath",t=>t.slice(0,-1)),r(this,"getParentNode",t=>{let e=this.resolveIndexPath(t);return e?this.at(this.getParentIndexPath(e)):void 0}),r(this,"visit",t=>{let{skip:e,...i}=t;g(this.rootNode,{...i,getChildren:this.getNodeChildren,onEnter:(n,l)=>{if(!this.isRootNode(n))return e?.({value:this.getNodeValue(n),node:n,indexPath:l})?"skip":i.onEnter?.(n,l)}})}),r(this,"getPreviousSibling",t=>{let e=this.getParentNode(t);if(!e)return;let i=this.getNodeChildren(e),n=t[t.length-1];for(;--n>=0;){let l=i[n];if(!this.getNodeDisabled(l))return l}}),r(this,"getNextSibling",t=>{let e=this.getParentNode(t);if(!e)return;let i=this.getNodeChildren(e),n=t[t.length-1];for(;++n<i.length;){let l=i[n];if(!this.getNodeDisabled(l))return l}}),r(this,"getSiblingNodes",t=>{let e=this.getParentNode(t);return e?this.getNodeChildren(e):[]}),r(this,"getValues",(t=this.rootNode)=>X(t,{getChildren:this.getNodeChildren,transform:i=>[this.getNodeValue(i)]}).slice(1)),r(this,"isValidDepth",(t,e)=>e==null?!0:typeof e=="function"?e(t.length):t.length===e),r(this,"isBranchNode",t=>this.getNodeChildren(t).length>0||this.getNodeChildrenCount(t)!=null),r(this,"getBranchValues",(t=this.rootNode,e={})=>{let i=[];return g(t,{getChildren:this.getNodeChildren,onEnter:(n,l)=>{if(l.length===0)return;let h=this.getNodeValue(n);if(e.skip?.({value:h,node:n,indexPath:l}))return"skip";this.isBranchNode(n)&&this.isValidDepth(l,e.depth)&&i.push(this.getNodeValue(n))}}),i}),r(this,"flatten",(t=this.rootNode)=>Z(t,{getChildren:this.getNodeChildren})),r(this,"_create",(t,e)=>this.getNodeChildren(t).length>0||e.length>0?{...t,children:e}:{...t}),r(this,"_insert",(t,e,i)=>this.copy(nt(t,{at:e,nodes:i,getChildren:this.getNodeChildren,create:this._create}))),r(this,"copy",t=>new L({...this.options,rootNode:t})),r(this,"_replace",(t,e,i)=>this.copy(st(t,{at:e,node:i,getChildren:this.getNodeChildren,create:this._create}))),r(this,"_move",(t,e,i)=>this.copy(ot(t,{indexPaths:e,to:i,getChildren:this.getNodeChildren,create:this._create}))),r(this,"_remove",(t,e)=>this.copy(rt(t,{indexPaths:e,getChildren:this.getNodeChildren,create:this._create}))),r(this,"replace",(t,e)=>this._replace(this.rootNode,t,e)),r(this,"remove",t=>this._remove(this.rootNode,t)),r(this,"insertBefore",(t,e)=>this.getParentNode(t)?this._insert(this.rootNode,t,e):void 0),r(this,"insertAfter",(t,e)=>{if(!this.getParentNode(t))return;let n=[...t.slice(0,-1),t[t.length-1]+1];return this._insert(this.rootNode,n,e)}),r(this,"move",(t,e)=>this._move(this.rootNode,t,e)),r(this,"filter",t=>{let e=Y(this.rootNode,{predicate:t,getChildren:this.getNodeChildren,create:this._create});return this.copy(e)}),r(this,"toJSON",()=>this.getValues(this.rootNode)),this.rootNode=o.rootNode}};var x={nodeToValue(s){return typeof s=="string"?s:N(s)&&m(s,"value")?s.value:""},nodeToString(s){return typeof s=="string"?s:N(s)&&m(s,"label")?s.label:x.nodeToValue(s)},isNodeDisabled(s){return N(s)&&m(s,"disabled")?!!s.disabled:!1},nodeToChildren(s){return s.children},nodeToChildrenCount(s){if(N(s)&&m(s,"childrenCount"))return s.childrenCount}};export{q as a,ht as b,ut as c,ct as d,at as e};
