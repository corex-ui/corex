import{B as f,H as b,l as c,m as s,y as L}from"./chunk-IYURAQ6S.mjs";function F(e){return!(e.metaKey||!L()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}var T=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function C(e,r,t){let n=t?f(t):null,i=s(n);return e=e||n instanceof i.HTMLInputElement&&!T.has(n?.type)||n instanceof i.HTMLTextAreaElement||n instanceof i.HTMLElement&&n.isContentEditable,!(e&&r==="keyboard"&&t instanceof i.KeyboardEvent&&!Reflect.has(H,t.key))}var u=null,E=new Set,d=new Map,a=!1,p=!1,H={Tab:!0,Escape:!0};function v(e,r){for(let t of E)t(e,r)}function l(e){a=!0,F(e)&&(u="keyboard",v("keyboard",e))}function o(e){u="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(a=!0,v("pointer",e))}function g(e){b(e)&&(a=!0,u="virtual")}function w(e){let r=f(e);r===s(r)||r===c(r)||(!a&&!p&&(u="virtual",v("virtual",e)),a=!1,p=!1)}function k(){a=!1,p=!0}function K(e){if(typeof window>"u"||d.get(s(e)))return;let r=s(e),t=c(e),n=r.HTMLElement.prototype.focus;function i(){u="virtual",v("virtual",null),a=!0,n.apply(this,arguments)}try{Object.defineProperty(r.HTMLElement.prototype,"focus",{configurable:!0,value:i})}catch{}t.addEventListener("keydown",l,!0),t.addEventListener("keyup",l,!0),t.addEventListener("click",g,!0),r.addEventListener("focus",w,!0),r.addEventListener("blur",k,!1),typeof r.PointerEvent<"u"?(t.addEventListener("pointerdown",o,!0),t.addEventListener("pointermove",o,!0),t.addEventListener("pointerup",o,!0)):(t.addEventListener("mousedown",o,!0),t.addEventListener("mousemove",o,!0),t.addEventListener("mouseup",o,!0)),r.addEventListener("beforeunload",()=>{I(e)},{once:!0}),d.set(r,{focus:n})}var I=(e,r)=>{let t=s(e),n=c(e),i=d.get(t);if(i){try{Object.defineProperty(t.HTMLElement.prototype,"focus",{configurable:!0,value:i.focus})}catch{}n.removeEventListener("keydown",l,!0),n.removeEventListener("keyup",l,!0),n.removeEventListener("click",g,!0),t.removeEventListener("focus",w,!0),t.removeEventListener("blur",k,!1),typeof t.PointerEvent<"u"?(n.removeEventListener("pointerdown",o,!0),n.removeEventListener("pointermove",o,!0),n.removeEventListener("pointerup",o,!0)):(n.removeEventListener("mousedown",o,!0),n.removeEventListener("mousemove",o,!0),n.removeEventListener("mouseup",o,!0)),d.delete(t)}};function P(){return u}function h(){return u==="keyboard"}function S(e={}){let{isTextInput:r,autoFocus:t,onChange:n,root:i}=e;K(i),n?.({isFocusVisible:t||h(),modality:u});let y=(m,M)=>{C(!!r,m,M)&&n?.({isFocusVisible:h(),modality:m})};return E.add(y),()=>{E.delete(y)}}export{P as a,h as b,S as c};
