import{l as He,m as ie}from"./chunk-UBXVV7GZ.mjs";import{a as De,b as oe,c as _e}from"./chunk-S6MRQC6S.mjs";import{a as we}from"./chunk-5MNNWH4C.mjs";import"./chunk-L4HS2GN2.mjs";import{$ as fe,B as U,Ba as ye,Bb as Le,C as Z,Ca as Ce,Cb as Ae,D as z,Db as Ne,Fb as v,G as pe,Ib as g,J as he,Ja as Se,K as me,L as ee,La as Me,O as D,Oa as Re,P as Oe,Ua as $,Wa as ne,_ as Ee,a as le,ba as W,d as A,da as Te,e as ce,f as de,fa as Ie,ha as Pe,i as ue,j as Q,k as F,m as ge,nb as _,oa as ve,ub as be,wb as ke,xa as te,yb as w}from"./chunk-IYURAQ6S.mjs";var $e=le("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem"),E=$e.build(),Y=e=>e.ids?.trigger??`menu:${e.id}:trigger`,We=e=>e.ids?.contextTrigger??`menu:${e.id}:ctx-trigger`,V=e=>e.ids?.content??`menu:${e.id}:content`,Ke=e=>e.ids?.arrow??`menu:${e.id}:arrow`,xe=e=>e.ids?.positioner??`menu:${e.id}:popper`,Xe=(e,t)=>e.ids?.group?.(t)??`menu:${e.id}:group:${t}`,x=(e,t)=>`${e.id}/${t}`,N=e=>e?.dataset.value??null,Ge=(e,t)=>e.ids?.groupLabel?.(t)??`menu:${e.id}:group-label:${t}`,C=e=>e.getById(V(e)),Ve=e=>e.getById(xe(e)),K=e=>e.getById(Y(e)),Ye=(e,t)=>t?e.getById(x(e,t)):null,re=e=>e.getById(We(e)),q=e=>{let o=`[role^="menuitem"][data-ownedby=${CSS.escape(V(e))}]:not([data-disabled])`;return ve(C(e),o)},je=e=>ye(q(e)),Je=e=>Ce(q(e)),ae=(e,t)=>t?e.id===t||e.dataset.value===t:!1,Qe=(e,t)=>{let o=q(e),n=o.findIndex(a=>ae(a,t.value));return Se(o,n,{loop:t.loop??t.loopFocus})},Ze=(e,t)=>{let o=q(e),n=o.findIndex(a=>ae(a,t.value));return Me(o,n,{loop:t.loop??t.loopFocus})},ze=(e,t)=>{let o=q(e),n=o.find(a=>ae(a,t.value));return te(o,{state:t.typeaheadState,key:t.key,activeId:n?.id??null})},X=e=>de(e)&&(e.dataset.disabled===""||e.hasAttribute("disabled")),Fe=e=>!!e?.getAttribute("role")?.startsWith("menuitem")&&!!e?.hasAttribute("data-controls"),se="menu:select";function et(e,t){if(!e)return;let o=ge(e),n=new o.CustomEvent(se,{detail:{value:t}});e.dispatchEvent(n)}function qe(e,t){let{context:o,send:n,state:a,computed:c,prop:r,scope:s}=e,d=a.hasTag("open"),m=o.get("isSubmenu"),h=c("isTypingAhead"),p=r("composite"),M=o.get("currentPlacement"),R=o.get("anchorPoint"),b=o.get("highlightedValue"),k=_e({...r("positioning"),placement:R?"bottom":M});function S(i){return{id:x(s,i.value),disabled:!!i.disabled,highlighted:b===i.value}}function j(i){let l=i.valueText??i.value;return{...i,id:i.value,valueText:l}}function L(i){return{...S(j(i)),checked:!!i.checked}}function H(i){let{closeOnSelect:l,valueText:O,value:P}=i,f=S(i),I=x(s,P);return t.element({...E.item.attrs,id:I,role:"menuitem","aria-disabled":ce(f.disabled),"data-disabled":A(f.disabled),"data-ownedby":V(s),"data-highlighted":A(f.highlighted),"data-value":P,"data-valuetext":O,onDragStart(u){u.currentTarget.matches("a[href]")&&u.preventDefault()},onPointerMove(u){if(f.disabled||u.pointerType!=="mouse")return;let y=u.currentTarget;if(f.highlighted)return;let J=D(u);n({type:"ITEM_POINTERMOVE",id:I,target:y,closeOnSelect:l,point:J})},onPointerLeave(u){if(f.disabled||u.pointerType!=="mouse"||!e.event.previous()?.type.includes("POINTER"))return;let J=u.currentTarget;n({type:"ITEM_POINTERLEAVE",id:I,target:J,closeOnSelect:l})},onPointerDown(u){if(f.disabled)return;let y=u.currentTarget;n({type:"ITEM_POINTERDOWN",target:y,id:I,closeOnSelect:l})},onClick(u){if(z(u)||Z(u)||f.disabled)return;let y=u.currentTarget;n({type:"ITEM_CLICK",target:y,id:I,closeOnSelect:l})}})}return{highlightedValue:b,open:d,setOpen(i){a.hasTag("open")!==i&&n({type:i?"OPEN":"CLOSE"})},setHighlightedValue(i){n({type:"HIGHLIGHTED.SET",value:i})},setParent(i){n({type:"PARENT.SET",value:i,id:i.prop("id")})},setChild(i){n({type:"CHILD.SET",value:i,id:i.prop("id")})},reposition(i={}){n({type:"POSITIONING.SET",options:i})},addItemListener(i){let l=s.getById(i.id);if(!l)return;let O=()=>i.onSelect?.();return l.addEventListener(se,O),()=>l.removeEventListener(se,O)},getContextTriggerProps(){return t.element({...E.contextTrigger.attrs,dir:r("dir"),id:We(s),"data-state":d?"open":"closed",onPointerDown(i){if(i.pointerType==="mouse")return;let l=D(i);n({type:"CONTEXT_MENU_START",point:l})},onPointerCancel(i){i.pointerType!=="mouse"&&n({type:"CONTEXT_MENU_CANCEL"})},onPointerMove(i){i.pointerType!=="mouse"&&n({type:"CONTEXT_MENU_CANCEL"})},onPointerUp(i){i.pointerType!=="mouse"&&n({type:"CONTEXT_MENU_CANCEL"})},onContextMenu(i){let l=D(i);n({type:"CONTEXT_MENU",point:l}),i.preventDefault()},style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none"}})},getTriggerItemProps(i){let l=i.getTriggerProps();return be(H({value:l.id}),l)},getTriggerProps(){return t.button({...m?E.triggerItem.attrs:E.trigger.attrs,"data-placement":o.get("currentPlacement"),type:"button",dir:r("dir"),id:Y(s),"data-uid":r("id"),"aria-haspopup":p?"menu":"dialog","aria-controls":V(s),"data-controls":V(s),"aria-expanded":d||void 0,"data-state":d?"open":"closed",onPointerMove(i){if(i.pointerType!=="mouse"||X(i.currentTarget)||!m)return;let O=D(i);n({type:"TRIGGER_POINTERMOVE",target:i.currentTarget,point:O})},onPointerLeave(i){if(X(i.currentTarget)||i.pointerType!=="mouse"||!m)return;let l=D(i);n({type:"TRIGGER_POINTERLEAVE",target:i.currentTarget,point:l})},onPointerDown(i){X(i.currentTarget)||he(i)||i.preventDefault()},onClick(i){i.defaultPrevented||X(i.currentTarget)||n({type:"TRIGGER_CLICK",target:i.currentTarget})},onBlur(){n({type:"TRIGGER_BLUR"})},onFocus(){n({type:"TRIGGER_FOCUS"})},onKeyDown(i){if(i.defaultPrevented)return;let l={ArrowDown(){n({type:"ARROW_DOWN"})},ArrowUp(){n({type:"ARROW_UP"})},Enter(){n({type:"ARROW_DOWN",src:"enter"})},Space(){n({type:"ARROW_DOWN",src:"space"})}},O=ee(i,{orientation:"vertical",dir:r("dir")}),P=l[O];P&&(i.preventDefault(),P(i))}})},getIndicatorProps(){return t.element({...E.indicator.attrs,dir:r("dir"),"data-state":d?"open":"closed"})},getPositionerProps(){return t.element({...E.positioner.attrs,dir:r("dir"),id:xe(s),style:k.floating})},getArrowProps(){return t.element({id:Ke(s),...E.arrow.attrs,dir:r("dir"),style:k.arrow})},getArrowTipProps(){return t.element({...E.arrowTip.attrs,dir:r("dir"),style:k.arrowTip})},getContentProps(){return t.element({...E.content.attrs,id:V(s),"aria-label":r("aria-label"),hidden:!d,"data-state":d?"open":"closed",role:p?"menu":"dialog",tabIndex:0,dir:r("dir"),"aria-activedescendant":c("highlightedId")||void 0,"aria-labelledby":Y(s),"data-placement":M,onPointerEnter(i){i.pointerType==="mouse"&&n({type:"MENU_POINTERENTER"})},onKeyDown(i){if(i.defaultPrevented||!F(i.currentTarget,U(i)))return;let l=U(i);if(!(l?.closest("[role=menu]")===i.currentTarget||l===i.currentTarget))return;if(i.key==="Tab"&&!fe(i)){i.preventDefault();return}let P={ArrowDown(){n({type:"ARROW_DOWN"})},ArrowUp(){n({type:"ARROW_UP"})},ArrowLeft(){n({type:"ARROW_LEFT"})},ArrowRight(){n({type:"ARROW_RIGHT"})},Enter(){n({type:"ENTER"})},Space(u){h?n({type:"TYPEAHEAD",key:u.key}):P.Enter?.(u)},Home(){n({type:"HOME"})},End(){n({type:"END"})}},f=ee(i,{dir:r("dir")}),I=P[f];if(I){I(i),i.stopPropagation(),i.preventDefault();return}r("typeahead")&&pe(i)&&(me(i)||Q(l)||(n({type:"TYPEAHEAD",key:i.key}),i.preventDefault()))}})},getSeparatorProps(){return t.element({...E.separator.attrs,role:"separator",dir:r("dir"),"aria-orientation":"horizontal"})},getItemState:S,getItemProps:H,getOptionItemState:L,getOptionItemProps(i){let{type:l,disabled:O,closeOnSelect:P}=i,f=j(i),I=L(i);return{...H(f),...t.element({"data-type":l,...E.item.attrs,dir:r("dir"),"data-value":f.value,role:`menuitem${l}`,"aria-checked":!!I.checked,"data-state":I.checked?"checked":"unchecked",onClick(u){if(O||z(u)||Z(u))return;let y=u.currentTarget;n({type:"ITEM_CLICK",target:y,option:f,closeOnSelect:P})}})}},getItemIndicatorProps(i){let l=L(ne(i)),O=l.checked?"checked":"unchecked";return t.element({...E.itemIndicator.attrs,dir:r("dir"),"data-disabled":A(l.disabled),"data-highlighted":A(l.highlighted),"data-state":$(i,"checked")?O:void 0,hidden:$(i,"checked")?!l.checked:void 0})},getItemTextProps(i){let l=L(ne(i)),O=l.checked?"checked":"unchecked";return t.element({...E.itemText.attrs,dir:r("dir"),"data-disabled":A(l.disabled),"data-highlighted":A(l.highlighted),"data-state":$(i,"checked")?O:void 0})},getItemGroupLabelProps(i){return t.element({...E.itemGroupLabel.attrs,id:Ge(s,i.htmlFor),dir:r("dir")})},getItemGroupProps(i){return t.element({id:Xe(s,i.id),...E.itemGroup.attrs,dir:r("dir"),"aria-labelledby":Ge(s,i.id),role:"group"})}}}var{not:T,and:G,or:tt}=ke(),Be={props({props:e}){return{closeOnSelect:!0,typeahead:!0,composite:!0,loopFocus:!1,navigate(t){Ie(t.node)},...e,positioning:{placement:"bottom-start",gutter:8,...e.positioning}}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"idle"},context({bindable:e,prop:t}){return{suspendPointer:e(()=>({defaultValue:!1})),highlightedValue:e(()=>({defaultValue:t("defaultHighlightedValue")||null,value:t("highlightedValue"),onChange(o){t("onHighlightChange")?.({highlightedValue:o})}})),lastHighlightedValue:e(()=>({defaultValue:null})),currentPlacement:e(()=>({defaultValue:void 0})),intentPolygon:e(()=>({defaultValue:null})),anchorPoint:e(()=>({defaultValue:null,hash(o){return`x: ${o?.x}, y: ${o?.y}`}})),isSubmenu:e(()=>({defaultValue:!1}))}},refs(){return{parent:null,children:{},typeaheadState:{...te.defaultOptions},positioningOverride:{}}},computed:{isRtl:({prop:e})=>e("dir")==="rtl",isTypingAhead:({refs:e})=>e.get("typeaheadState").keysSoFar!=="",highlightedId:({context:e,scope:t,refs:o})=>it(o.get("children"),e.get("highlightedValue"),t)},watch({track:e,action:t,context:o,prop:n}){e([()=>o.get("isSubmenu")],()=>{t(["setSubmenuPlacement"])}),e([()=>o.hash("anchorPoint")],()=>{o.get("anchorPoint")&&t(["reposition"])}),e([()=>n("open")],()=>{t(["toggleVisibility"])})},on:{"PARENT.SET":{actions:["setParentMenu"]},"CHILD.SET":{actions:["setChildMenu"]},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],OPEN_AUTOFOCUS:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"HIGHLIGHTED.RESTORE":{actions:["restoreHighlightedItem"]},"HIGHLIGHTED.SET":{actions:["setHighlightedItem"]}},states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed"},CONTEXT_MENU_START:{target:"opening:contextmenu",actions:["setAnchorPoint"]},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TRIGGER_FOCUS:{guard:T("isSubmenu"),target:"closed"},TRIGGER_POINTERMOVE:{guard:"isSubmenu",target:"opening"}}},"opening:contextmenu":{tags:["closed"],effects:["waitForLongPress"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed"},CONTEXT_MENU_CANCEL:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"LONG_PRESS.OPEN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}},opening:{tags:["closed"],effects:["waitForOpenDelay"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed"},BLUR:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TRIGGER_POINTERLEAVE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"DELAY.OPEN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}},closing:{tags:["open"],effects:["trackPointerMove","trackInteractOutside","waitForCloseDelay"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem"]},MENU_POINTERENTER:{target:"open",actions:["clearIntentPolygon"]},POINTER_MOVED_AWAY_FROM_SUBMENU:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem"]}],"DELAY.CLOSE":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem","invokeOnClose"]}]}},closed:{tags:["closed"],entry:["clearHighlightedItem","focusTrigger","resumePointer","clearAnchorPoint"],on:{"CONTROLLED.OPEN":[{guard:tt("isOpenAutoFocusEvent","isArrowDownEvent"),target:"open",actions:["highlightFirstItem"]},{guard:"isArrowUpEvent",target:"open",actions:["highlightLastItem"]},{target:"open"}],CONTEXT_MENU_START:{target:"opening:contextmenu",actions:["setAnchorPoint"]},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TRIGGER_POINTERMOVE:{guard:"isTriggerItem",target:"opening"},TRIGGER_BLUR:{target:"idle"},ARROW_DOWN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],ARROW_UP:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["highlightLastItem","invokeOnOpen"]}]}},open:{tags:["open"],effects:["trackInteractOutside","trackPositioning","scrollToHighlightedItem"],entry:["focusMenu","resumePointer"],on:{"CONTROLLED.CLOSE":[{target:"closed",guard:"isArrowLeftEvent",actions:["focusParentMenu"]},{target:"closed"}],TRIGGER_CLICK:[{guard:G(T("isTriggerItem"),"isOpenControlled"),actions:["invokeOnClose"]},{guard:T("isTriggerItem"),target:"closed",actions:["invokeOnClose"]}],CONTEXT_MENU:{actions:["setAnchorPoint","focusMenu"]},ARROW_UP:{actions:["highlightPrevItem","focusMenu"]},ARROW_DOWN:{actions:["highlightNextItem","focusMenu"]},ARROW_LEFT:[{guard:G("isSubmenu","isOpenControlled"),actions:["invokeOnClose"]},{guard:"isSubmenu",target:"closed",actions:["focusParentMenu","invokeOnClose"]}],HOME:{actions:["highlightFirstItem","focusMenu"]},END:{actions:["highlightLastItem","focusMenu"]},ARROW_RIGHT:{guard:"isTriggerItemHighlighted",actions:["openSubmenu"]},ENTER:[{guard:"isTriggerItemHighlighted",actions:["openSubmenu"]},{actions:["clickHighlightedItem"]}],ITEM_POINTERMOVE:[{guard:T("isPointerSuspended"),actions:["setHighlightedItem","focusMenu","closeSiblingMenus"]},{actions:["setLastHighlightedItem","closeSiblingMenus"]}],ITEM_POINTERLEAVE:{guard:G(T("isPointerSuspended"),T("isTriggerItem")),actions:["clearHighlightedItem"]},ITEM_CLICK:[{guard:G(T("isTriggerItemHighlighted"),T("isHighlightedItemEditable"),"closeOnSelect","isOpenControlled"),actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:G(T("isTriggerItemHighlighted"),T("isHighlightedItemEditable"),"closeOnSelect"),target:"closed",actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:G(T("isTriggerItemHighlighted"),T("isHighlightedItemEditable")),actions:["invokeOnSelect","setOptionState"]},{actions:["setHighlightedItem"]}],TRIGGER_POINTERMOVE:{guard:"isTriggerItem",actions:["setIntentPolygon"]},TRIGGER_POINTERLEAVE:{target:"closing",actions:["setIntentPolygon"]},ITEM_POINTERDOWN:{actions:["setHighlightedItem"]},TYPEAHEAD:{actions:["highlightMatchedItem"]},FOCUS_MENU:{actions:["focusMenu"]},"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{closeOnSelect:({prop:e,event:t})=>!!(t?.closeOnSelect??e("closeOnSelect")),isTriggerItem:({event:e})=>Fe(e.target),isTriggerItemHighlighted:({event:e,scope:t,computed:o})=>!!(e.target??t.getById(o("highlightedId")))?.hasAttribute("data-controls"),isSubmenu:({context:e})=>e.get("isSubmenu"),isPointerSuspended:({context:e})=>e.get("suspendPointer"),isHighlightedItemEditable:({scope:e,computed:t})=>Q(e.getById(t("highlightedId"))),isOpenControlled:({prop:e})=>e("open")!==void 0,isArrowLeftEvent:({event:e})=>e.previousEvent?.type==="ARROW_LEFT",isArrowUpEvent:({event:e})=>e.previousEvent?.type==="ARROW_UP",isArrowDownEvent:({event:e})=>e.previousEvent?.type==="ARROW_DOWN",isOpenAutoFocusEvent:({event:e})=>e.previousEvent?.type==="OPEN_AUTOFOCUS"},effects:{waitForOpenDelay({send:e}){let t=setTimeout(()=>{e({type:"DELAY.OPEN"})},200);return()=>clearTimeout(t)},waitForCloseDelay({send:e}){let t=setTimeout(()=>{e({type:"DELAY.CLOSE"})},100);return()=>clearTimeout(t)},waitForLongPress({send:e}){let t=setTimeout(()=>{e({type:"LONG_PRESS.OPEN"})},700);return()=>clearTimeout(t)},trackPositioning({context:e,prop:t,scope:o,refs:n}){if(re(o))return;let a={...t("positioning"),...n.get("positioningOverride")};e.set("currentPlacement",a.placement);let c=()=>Ve(o);return oe(K(o),c,{...a,defer:!0,onComplete(r){e.set("currentPlacement",r.placement)}})},trackInteractOutside({refs:e,scope:t,prop:o,context:n,send:a}){let c=()=>C(t),r=!0;return we(c,{type:"menu",defer:!0,exclude:[K(t)],onInteractOutside:o("onInteractOutside"),onRequestDismiss:o("onRequestDismiss"),onFocusOutside(s){o("onFocusOutside")?.(s);let d=U(s.detail.originalEvent);if(F(re(t),d)){s.preventDefault();return}},onEscapeKeyDown(s){o("onEscapeKeyDown")?.(s),n.get("isSubmenu")&&s.preventDefault(),Ue({parent:e.get("parent")})},onPointerDownOutside(s){o("onPointerDownOutside")?.(s);let d=U(s.detail.originalEvent);if(F(re(t),d)&&s.detail.contextmenu){s.preventDefault();return}r=!s.detail.focusable},onDismiss(){a({type:"CLOSE",src:"interact-outside",restoreFocus:r})}})},trackPointerMove({context:e,scope:t,send:o,refs:n,flush:a}){let c=n.get("parent");a(()=>{c.context.set("suspendPointer",!0)});let r=t.getDoc();return Oe(r,"pointermove",s=>{nt(e.get("intentPolygon"),{x:s.clientX,y:s.clientY})||(o({type:"POINTER_MOVED_AWAY_FROM_SUBMENU"}),c.context.set("suspendPointer",!1))})},scrollToHighlightedItem({event:e,scope:t,computed:o}){let n=()=>{if(e.current().type.startsWith("ITEM_POINTER"))return;let c=t.getById(o("highlightedId")),r=C(t);Pe(c,{rootEl:r,block:"nearest"})};return W(()=>n()),Te(()=>C(t),{defer:!0,attributes:["aria-activedescendant"],callback:n})}},actions:{setAnchorPoint({context:e,event:t}){e.set("anchorPoint",o=>Re(o,t.point)?o:t.point)},setSubmenuPlacement({context:e,computed:t,refs:o}){if(!e.get("isSubmenu"))return;let n=t("isRtl")?"left-start":"right-start";o.set("positioningOverride",{placement:n,gutter:0})},reposition({context:e,scope:t,prop:o,event:n,refs:a}){let c=()=>Ve(t),r=e.get("anchorPoint"),s=r?()=>({width:0,height:0,...r}):void 0,d={...o("positioning"),...a.get("positioningOverride")};oe(K(t),c,{...d,defer:!0,getAnchorRect:s,...n.options??{},listeners:!1,onComplete(m){e.set("currentPlacement",m.placement)}})},setOptionState({event:e}){if(!e.option)return;let{checked:t,onCheckedChange:o,type:n}=e.option;n==="radio"?o?.(!0):n==="checkbox"&&o?.(!t)},clickHighlightedItem({scope:e,computed:t,prop:o,context:n}){let a=e.getById(t("highlightedId"));if(!a||a.dataset.disabled)return;let c=n.get("highlightedValue");ue(a)?o("navigate")?.({value:c,node:a,href:a.href}):queueMicrotask(()=>a.click())},setIntentPolygon({context:e,scope:t,event:o}){let n=C(t),a=e.get("currentPlacement");if(!n||!a)return;let c=n.getBoundingClientRect(),r=He(c,a);if(!r)return;let d=De(a)==="right"?-5:5;e.set("intentPolygon",[{...o.point,x:o.point.x+d},...r])},clearIntentPolygon({context:e}){e.set("intentPolygon",null)},clearAnchorPoint({context:e}){e.set("anchorPoint",null)},resumePointer({refs:e,flush:t}){let o=e.get("parent");o&&t(()=>{o.context.set("suspendPointer",!1)})},setHighlightedItem({context:e,event:t}){let o=t.value||N(t.target);e.set("highlightedValue",o)},clearHighlightedItem({context:e}){e.set("highlightedValue",null)},focusMenu({scope:e}){W(()=>{let t=C(e);Ee({root:t,enabled:!F(t,e.getActiveElement()),filter(n){return!n.role?.startsWith("menuitem")}})?.focus({preventScroll:!0})})},highlightFirstItem({context:e,scope:t}){(C(t)?queueMicrotask:W)(()=>{let n=je(t);n&&e.set("highlightedValue",N(n))})},highlightLastItem({context:e,scope:t}){(C(t)?queueMicrotask:W)(()=>{let n=Je(t);n&&e.set("highlightedValue",N(n))})},highlightNextItem({context:e,scope:t,event:o,prop:n}){let a=Qe(t,{loop:o.loop,value:e.get("highlightedValue"),loopFocus:n("loopFocus")});e.set("highlightedValue",N(a))},highlightPrevItem({context:e,scope:t,event:o,prop:n}){let a=Ze(t,{loop:o.loop,value:e.get("highlightedValue"),loopFocus:n("loopFocus")});e.set("highlightedValue",N(a))},invokeOnSelect({context:e,prop:t,scope:o}){let n=e.get("highlightedValue");if(n==null)return;let a=Ye(o,n);et(a,n),t("onSelect")?.({value:n})},focusTrigger({scope:e,context:t,event:o}){t.get("isSubmenu")||t.get("anchorPoint")||o.restoreFocus===!1||queueMicrotask(()=>K(e)?.focus({preventScroll:!0}))},highlightMatchedItem({scope:e,context:t,event:o,refs:n}){let a=ze(e,{key:o.key,value:t.get("highlightedValue"),typeaheadState:n.get("typeaheadState")});a&&t.set("highlightedValue",N(a))},setParentMenu({refs:e,event:t,context:o}){e.set("parent",t.value),o.set("isSubmenu",!0)},setChildMenu({refs:e,event:t}){let o=e.get("children");o[t.id]=t.value,e.set("children",o)},closeSiblingMenus({refs:e,event:t,scope:o}){let n=t.target;if(!Fe(n))return;let a=n?.getAttribute("data-uid"),c=e.get("children");for(let r in c){if(r===a)continue;let s=c[r],d=s.context.get("intentPolygon");d&&t.point&&ie(d,t.point)||(C(o)?.focus({preventScroll:!0}),s.send({type:"CLOSE"}))}},closeRootMenu({refs:e}){Ue({parent:e.get("parent")})},openSubmenu({refs:e,scope:t,computed:o}){let a=t.getById(o("highlightedId"))?.getAttribute("data-uid"),c=e.get("children");(a?c[a]:null)?.send({type:"OPEN_AUTOFOCUS"})},focusParentMenu({refs:e}){e.get("parent")?.send({type:"FOCUS_MENU"})},setLastHighlightedItem({context:e,event:t}){e.set("lastHighlightedValue",N(t.target))},restoreHighlightedItem({context:e}){e.get("lastHighlightedValue")&&(e.set("highlightedValue",e.get("lastHighlightedValue")),e.set("lastHighlightedValue",null))},restoreParentHighlightedItem({refs:e}){e.get("parent")?.send({type:"HIGHLIGHTED.RESTORE"})},invokeOnOpen({prop:e}){e("onOpenChange")?.({open:!0})},invokeOnClose({prop:e}){e("onOpenChange")?.({open:!1})},toggleVisibility({prop:e,event:t,send:o}){o({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:t})}}}};function Ue(e){let t=e.parent;for(;t&&t.context.get("isSubmenu");)t=t.refs.get("parent");t?.send({type:"CLOSE"})}function nt(e,t){return e?ie(e,t):!1}function it(e,t,o){let n=Object.keys(e).length>0;if(!t)return null;if(!n)return x(o,t);for(let a in e){let c=e[a],r=Y(c.scope);if(r===t)return r}return x(o,t)}var ot=w()(["anchorPoint","aria-label","closeOnSelect","composite","defaultHighlightedValue","defaultOpen","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","onSelect","open","positioning","typeahead"]),ft=_(ot),rt=w()(["closeOnSelect","disabled","value","valueText"]),Tt=_(rt),st=w()(["htmlFor"]),It=_(st),at=w()(["id"]),Pt=_(at),lt=w()(["checked","closeOnSelect","disabled","onCheckedChange","type","value","valueText"]),vt=_(lt);var B=class extends Ne{children=[];initMachine(t){return new Ae(Be,t)}initApi(){return qe(this.machine.service,Le)}setChild(t){this.api.setChild(t.machine.service),this.children.includes(t)||this.children.push(t)}setParent(t){this.api.setParent(t.machine.service)}isOwnElement(t){return t.closest('[phx-hook="Menu"]')===this.el}renderSubmenuTriggers(){let t=this.el.querySelector('[data-scope="menu"][data-part="content"]');if(!t)return;let o=t.querySelectorAll('[data-scope="menu"][data-nested-menu]');for(let n of o){if(!this.isOwnElement(n))continue;let a=n.dataset.nestedMenu;if(!a)continue;let c=this.children.find(s=>s.el.id===`menu:${a}`);if(!c)continue;let r=()=>{let s=this.api.getTriggerItemProps(c.api);this.spreadProps(n,s)};r(),this.machine.subscribe(r),c.machine.subscribe(r)}}render(){let t=this.el.querySelector('[data-scope="menu"][data-part="trigger"]');t&&this.spreadProps(t,this.api.getTriggerProps());let o=this.el.querySelector('[data-scope="menu"][data-part="positioner"]'),n=this.el.querySelector('[data-scope="menu"][data-part="content"]');if(o&&n){this.spreadProps(o,this.api.getPositionerProps()),this.spreadProps(n,this.api.getContentProps()),n.style.pointerEvents="auto",o.hidden=!this.api.open;let c=!this.el.querySelector('[data-scope="menu"][data-part="trigger"]');(this.api.open||c)&&(n.querySelectorAll('[data-scope="menu"][data-part="item"]').forEach(h=>{if(!this.isOwnElement(h))return;let p=h.dataset.value;if(p){let M=h.hasAttribute("data-disabled");this.spreadProps(h,this.api.getItemProps({value:p,disabled:M||void 0}))}}),n.querySelectorAll('[data-scope="menu"][data-part="item-group"]').forEach(h=>{if(!this.isOwnElement(h))return;let p=h.id;p&&this.spreadProps(h,this.api.getItemGroupProps({id:p}))}),n.querySelectorAll('[data-scope="menu"][data-part="separator"]').forEach(h=>{this.isOwnElement(h)&&this.spreadProps(h,this.api.getSeparatorProps())}))}let a=this.el.querySelector('[data-scope="menu"][data-part="indicator"]');a&&this.spreadProps(a,this.api.getIndicatorProps())}};var Lt={mounted(){let e=this.el;if(e.hasAttribute("data-nested"))return;let t=this.pushEvent.bind(this),o=()=>this.liveSocket?.main,n=new B(e,{id:e.id.replace("menu:",""),...g(e,"controlled")?{open:g(e,"open")}:{defaultOpen:g(e,"defaultOpen")},closeOnSelect:g(e,"closeOnSelect"),loopFocus:g(e,"loopFocus"),typeahead:g(e,"typeahead"),composite:g(e,"composite"),dir:v(e,"dir",["ltr","rtl"]),onSelect:r=>{let s=g(e,"redirect"),d=[...e.querySelectorAll('[data-scope="menu"][data-part="item"]')].find(k=>k.getAttribute("data-value")===r.value),m=d?.getAttribute("data-redirect"),h=d?.hasAttribute("data-new-tab"),p=o();s&&r.value&&(p?.isDead??!0)&&m!=="false"&&(h?window.open(r.value,"_blank","noopener,noreferrer"):window.location.href=r.value);let R=v(e,"onSelect");R&&p&&!p.isDead&&p.isConnected()&&t(R,{id:e.id,value:r.value??null});let b=v(e,"onSelectClient");b&&e.dispatchEvent(new CustomEvent(b,{bubbles:!0,detail:{id:e.id,value:r.value??null}}))},onOpenChange:r=>{let s=o(),d=v(e,"onOpenChange");d&&s&&!s.isDead&&s.isConnected()&&t(d,{id:e.id,open:r.open??!1});let m=v(e,"onOpenChangeClient");m&&e.dispatchEvent(new CustomEvent(m,{bubbles:!0,detail:{id:e.id,open:r.open??!1}}))}});n.init(),this.menu=n,this.nestedMenus=new Map;let a=e.querySelectorAll('[data-scope="menu"][data-nested="menu"]'),c=[];a.forEach((r,s)=>{let d=r.id;if(d){let m=`${d}-${s}`,h=new B(r,{id:m,dir:v(r,"dir",["ltr","rtl"]),closeOnSelect:g(r,"closeOnSelect"),loopFocus:g(r,"loopFocus"),typeahead:g(r,"typeahead"),composite:g(r,"composite"),onSelect:p=>{let M=g(e,"redirect"),R=[...e.querySelectorAll('[data-scope="menu"][data-part="item"]')].find(i=>i.getAttribute("data-value")===p.value),b=R?.getAttribute("data-redirect"),k=R?.hasAttribute("data-new-tab"),S=o();M&&p.value&&(S?.isDead??!0)&&b!=="false"&&(k?window.open(p.value,"_blank","noopener,noreferrer"):window.location.href=p.value);let L=v(e,"onSelect");L&&S&&!S.isDead&&S.isConnected()&&t(L,{id:e.id,value:p.value??null});let H=v(e,"onSelectClient");H&&e.dispatchEvent(new CustomEvent(H,{bubbles:!0,detail:{id:e.id,value:p.value??null}}))}});h.init(),this.nestedMenus?.set(d,h),c.push(h)}}),setTimeout(()=>{c.forEach(r=>{this.menu&&(this.menu.setChild(r),r.setParent(this.menu))}),this.menu&&this.menu.children.length>0&&this.menu.renderSubmenuTriggers()},0),this.onSetOpen=r=>{let{open:s}=r.detail;n.api.open!==s&&n.api.setOpen(s)},e.addEventListener("phx:menu:set-open",this.onSetOpen),this.handlers=[],this.handlers.push(this.handleEvent("menu_set_open",r=>{let s=r.menu_id;(!s||e.id===s||e.id===`menu:${s}`)&&n.api.setOpen(r.open)})),this.handlers.push(this.handleEvent("menu_open",()=>{this.pushEvent("menu_open_response",{open:n.api.open})}))},updated(){this.el.hasAttribute("data-nested")||this.menu?.updateProps({id:this.el.id,...g(this.el,"controlled")?{open:g(this.el,"open")}:{defaultOpen:g(this.el,"defaultOpen")},closeOnSelect:g(this.el,"closeOnSelect"),loopFocus:g(this.el,"loopFocus"),typeahead:g(this.el,"typeahead"),composite:g(this.el,"composite"),dir:v(this.el,"dir",["ltr","rtl"])})},destroyed(){if(!this.el.hasAttribute("data-nested")){if(this.onSetOpen&&this.el.removeEventListener("phx:menu:set-open",this.onSetOpen),this.handlers)for(let e of this.handlers)this.removeHandleEvent(e);if(this.nestedMenus)for(let[,e]of this.nestedMenus)e.destroy();this.menu?.destroy()}}};export{Lt as Menu};
