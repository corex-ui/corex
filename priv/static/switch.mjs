import{b as F,c as M}from"./chunk-XQAZHZIC.mjs";import{B as y,Bb as L,Cb as _,Db as q,Fb as o,Ib as d,R as w,T as S,U as T,a as E,d as l,na as H,nb as I,wb as D,ya as P,yb as V,z as b}from"./chunk-IYURAQ6S.mjs";var X=E("switch").parts("root","label","control","thumb"),f=X.build(),R=e=>e.ids?.root??`switch:${e.id}`,O=e=>e.ids?.label??`switch:${e.id}:label`,$=e=>e.ids?.thumb??`switch:${e.id}:thumb`,z=e=>e.ids?.control??`switch:${e.id}:control`,v=e=>e.ids?.hiddenInput??`switch:${e.id}:input`,B=e=>e.getById(R(e)),h=e=>e.getById(v(e));function x(e,t){let{context:i,send:s,prop:a,scope:r}=e,c=!!a("disabled"),m=!!a("readOnly"),j=!!a("required"),u=!!i.get("checked"),C=!c&&i.get("focused"),K=!c&&i.get("focusVisible"),G=!c&&i.get("active"),p={"data-active":l(G),"data-focus":l(C),"data-focus-visible":l(K),"data-readonly":l(m),"data-hover":l(i.get("hovered")),"data-disabled":l(c),"data-state":u?"checked":"unchecked","data-invalid":l(a("invalid")),"data-required":l(j)};return{checked:u,disabled:c,focused:C,setChecked(n){s({type:"CHECKED.SET",checked:n,isTrusted:!1})},toggleChecked(){s({type:"CHECKED.TOGGLE",checked:u,isTrusted:!1})},getRootProps(){return t.label({...f.root.attrs,...p,dir:a("dir"),id:R(r),htmlFor:v(r),onPointerMove(){c||s({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){c||s({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(n){if(c)return;y(n)===h(r)&&n.stopPropagation(),b()&&h(r)?.focus()}})},getLabelProps(){return t.element({...f.label.attrs,...p,dir:a("dir"),id:O(r)})},getThumbProps(){return t.element({...f.thumb.attrs,...p,dir:a("dir"),id:$(r),"aria-hidden":!0})},getControlProps(){return t.element({...f.control.attrs,...p,dir:a("dir"),id:z(r),"aria-hidden":!0})},getHiddenInputProps(){return t.input({id:v(r),type:"checkbox",required:a("required"),defaultChecked:u,disabled:c,"aria-labelledby":O(r),"aria-invalid":a("invalid"),name:a("name"),form:a("form"),value:a("value"),style:P,onFocus(){let n=F();s({type:"CONTEXT.SET",context:{focused:!0,focusVisible:n}})},onBlur(){s({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(n){if(m){n.preventDefault();return}let g=n.currentTarget.checked;s({type:"CHECKED.SET",checked:g,isTrusted:!0})}})}}}var{not:N}=D(),A={props({props:e}){return{defaultChecked:!1,label:"switch",value:"on",...e}},initialState(){return"ready"},context({prop:e,bindable:t}){return{checked:t(()=>({defaultValue:e("defaultChecked"),value:e("checked"),onChange(i){e("onCheckedChange")?.({checked:i})}})),fieldsetDisabled:t(()=>({defaultValue:!1})),focusVisible:t(()=>({defaultValue:!1})),active:t(()=>({defaultValue:!1})),focused:t(()=>({defaultValue:!1})),hovered:t(()=>({defaultValue:!1}))}},computed:{isDisabled:({context:e,prop:t})=>t("disabled")||e.get("fieldsetDisabled")},watch({track:e,prop:t,context:i,action:s}){e([()=>t("disabled")],()=>{s(["removeFocusIfNeeded"])}),e([()=>i.get("checked")],()=>{s(["syncInputElement"])})},effects:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:N("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:N("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}},implementations:{guards:{isTrusted:({event:e})=>!!e.isTrusted},effects:{trackPressEvent({computed:e,scope:t,context:i}){if(!e("isDisabled"))return H({pointerNode:B(t),keyboardNode:h(t),isValidKey:s=>s.key===" ",onPress:()=>i.set("active",!1),onPressStart:()=>i.set("active",!0),onPressEnd:()=>i.set("active",!1)})},trackFocusVisible({computed:e,scope:t}){if(!e("isDisabled"))return M({root:t.getRootNode()})},trackFormControlState({context:e,send:t,scope:i}){return T(h(i),{onFieldsetDisabledChange(s){e.set("fieldsetDisabled",s)},onFormReset(){let s=e.initial("checked");t({type:"CHECKED.SET",checked:!!s,src:"form-reset"})}})}},actions:{setContext({context:e,event:t}){for(let i in t.context)e.set(i,t.context[i])},syncInputElement({context:e,scope:t}){let i=h(t);i&&w(i,!!e.get("checked"))},removeFocusIfNeeded({context:e,prop:t}){t("disabled")&&e.set("focused",!1)},setChecked({context:e,event:t}){e.set("checked",t.checked)},toggleChecked({context:e}){e.set("checked",!e.get("checked"))},dispatchChangeEvent({context:e,scope:t}){queueMicrotask(()=>{let i=h(t);S(i,{checked:e.get("checked")})})}}}},U=V()(["checked","defaultChecked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),ie=I(U);var k=class extends q{initMachine(t){return new _(A,t)}initApi(){return x(this.machine.service,L)}render(){let t=this.el.querySelector('[data-scope="switch"][data-part="root"]');if(!t)return;this.spreadProps(t,this.api.getRootProps());let i=this.el.querySelector('[data-scope="switch"][data-part="hidden-input"]');i&&this.spreadProps(i,this.api.getHiddenInputProps());let s=this.el.querySelector('[data-scope="switch"][data-part="label"]');s&&this.spreadProps(s,this.api.getLabelProps());let a=this.el.querySelector('[data-scope="switch"][data-part="control"]');a&&this.spreadProps(a,this.api.getControlProps());let r=this.el.querySelector('[data-scope="switch"][data-part="thumb"]');r&&this.spreadProps(r,this.api.getThumbProps())}};var le={mounted(){let e=this.el,t=this.pushEvent.bind(this);this.wasFocused=!1;let i=new k(e,{id:e.id,...d(e,"controlled")?{checked:d(e,"checked")}:{defaultChecked:d(e,"defaultChecked")},disabled:d(e,"disabled"),name:o(e,"name"),form:o(e,"form"),value:o(e,"value"),dir:o(e,"dir",["ltr","rtl"]),invalid:d(e,"invalid"),required:d(e,"required"),readOnly:d(e,"readOnly"),label:o(e,"label"),onCheckedChange:s=>{let a=o(e,"onCheckedChange");a&&!this.liveSocket.main.isDead&&this.liveSocket.main.isConnected()&&t(a,{checked:s.checked,id:e.id});let r=o(e,"onCheckedChangeClient");r&&e.dispatchEvent(new CustomEvent(r,{bubbles:!0,detail:{value:s,id:e.id}}))}});i.init(),this.zagSwitch=i,this.onSetChecked=s=>{let{value:a}=s.detail;i.api.setChecked(a)},e.addEventListener("phx:switch:set-checked",this.onSetChecked),this.handlers=[],this.handlers.push(this.handleEvent("switch_set_checked",s=>{let a=s.id;a&&a!==e.id||i.api.setChecked(s.value)})),this.handlers.push(this.handleEvent("switch_toggle_checked",s=>{let a=s.id;a&&a!==e.id||i.api.toggleChecked()})),this.handlers.push(this.handleEvent("switch_checked",()=>{this.pushEvent("switch_checked_response",{value:i.api.checked})})),this.handlers.push(this.handleEvent("switch_focused",()=>{this.pushEvent("switch_focused_response",{value:i.api.focused})})),this.handlers.push(this.handleEvent("switch_disabled",()=>{this.pushEvent("switch_disabled_response",{value:i.api.disabled})}))},beforeUpdate(){this.wasFocused=this.zagSwitch?.api.focused??!1},updated(){this.zagSwitch?.updateProps({id:this.el.id,...d(this.el,"controlled")?{checked:d(this.el,"checked")}:{defaultChecked:d(this.el,"defaultChecked")},disabled:d(this.el,"disabled"),name:o(this.el,"name"),form:o(this.el,"form"),value:o(this.el,"value"),dir:o(this.el,"dir",["ltr","rtl"]),invalid:d(this.el,"invalid"),required:d(this.el,"required"),readOnly:d(this.el,"readOnly"),label:o(this.el,"label")}),d(this.el,"controlled")&&this.wasFocused&&this.el.querySelector('[data-part="hidden-input"]')?.focus()},destroyed(){if(this.onSetChecked&&this.el.removeEventListener("phx:switch:set-checked",this.onSetChecked),this.handlers)for(let e of this.handlers)this.removeHandleEvent(e);this.zagSwitch?.destroy()}};export{le as Switch};
