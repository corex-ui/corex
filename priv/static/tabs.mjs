import{B as H,Ba as z,Bb as Q,C as k,Ca as K,Cb as Z,Db as ee,E as D,Fb as c,Ib as F,L as M,Oa as Y,V as x,Ya as J,a as w,ba as b,d as p,fa as U,i as O,k as N,kb as T,nb as A,oa as W,qa as $,ra as j,sa as q,ta as X,xb as G,yb as I,z as B}from"./chunk-IYURAQ6S.mjs";var re=w("tabs").parts("root","list","trigger","content","indicator"),V=re.build(),ne=e=>e.ids?.root??`tabs:${e.id}`,C=e=>e.ids?.list??`tabs:${e.id}:list`,P=(e,t)=>e.ids?.content?.(t)??`tabs:${e.id}:content-${t}`,m=(e,t)=>e.ids?.trigger?.(t)??`tabs:${e.id}:trigger-${t}`,ae=e=>e.ids?.indicator??`tabs:${e.id}:indicator`,le=e=>e.getById(C(e)),ue=(e,t)=>e.getById(P(e,t)),R=(e,t)=>t!=null?e.getById(m(e,t)):null,te=e=>e.getById(ae(e)),E=e=>{let o=`[role=tab][data-ownedby='${CSS.escape(C(e))}']:not([disabled])`;return W(le(e),o)},ce=e=>z(E(e)),de=e=>K(E(e)),ge=(e,t)=>j(E(e),m(e,t.value),t.loopFocus),fe=(e,t)=>q(E(e),m(e,t.value),t.loopFocus),oe=e=>({x:e?.offsetLeft??0,y:e?.offsetTop??0,width:e?.offsetWidth??0,height:e?.offsetHeight??0}),ve=(e,t)=>{let o=$(E(e),m(e,t));return oe(o)};function se(e,t){let{state:o,send:a,context:s,prop:i,scope:n}=e,l=i("translations"),d=o.matches("focused"),g=i("orientation")==="vertical",h=i("orientation")==="horizontal",S=i("composite");function L(r){return{selected:s.get("value")===r.value,focused:s.get("focusedValue")===r.value,disabled:!!r.disabled}}return{value:s.get("value"),focusedValue:s.get("focusedValue"),setValue(r){a({type:"SET_VALUE",value:r})},clearValue(){a({type:"CLEAR_VALUE"})},setIndicatorRect(r){let u=m(n,r);a({type:"SET_INDICATOR_RECT",id:u})},syncTabIndex(){a({type:"SYNC_TAB_INDEX"})},selectNext(r){a({type:"TAB_FOCUS",value:r,src:"selectNext"}),a({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(r){a({type:"TAB_FOCUS",value:r,src:"selectPrev"}),a({type:"ARROW_PREV",src:"selectPrev"})},focus(){let r=s.get("value");r&&R(n,r)?.focus()},getRootProps(){return t.element({...V.root.attrs,id:ne(n),"data-orientation":i("orientation"),"data-focus":p(d),dir:i("dir")})},getListProps(){return t.element({...V.list.attrs,id:C(n),role:"tablist",dir:i("dir"),"data-focus":p(d),"aria-orientation":i("orientation"),"data-orientation":i("orientation"),"aria-label":l?.listLabel,onKeyDown(r){if(r.defaultPrevented||D(r)||!N(r.currentTarget,H(r)))return;let u={ArrowDown(){h||a({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){h||a({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){g||a({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){g||a({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){a({type:"HOME"})},End(){a({type:"END"})}},f=M(r,{dir:i("dir"),orientation:i("orientation")}),v=u[f];if(v){r.preventDefault(),v(r);return}}})},getTriggerState:L,getTriggerProps(r){let{value:u,disabled:f}=r,v=L(r);return t.button({...V.trigger.attrs,role:"tab",type:"button",disabled:f,dir:i("dir"),"data-orientation":i("orientation"),"data-disabled":p(f),"aria-disabled":f,"data-value":u,"aria-selected":v.selected,"data-selected":p(v.selected),"data-focus":p(v.focused),"aria-controls":v.selected?P(n,u):void 0,"data-ownedby":C(n),"data-ssr":p(s.get("ssr")),id:m(n,u),tabIndex:v.selected&&S?0:-1,onFocus(){a({type:"TAB_FOCUS",value:u})},onBlur(y){y.relatedTarget?.getAttribute("role")!=="tab"&&a({type:"TAB_BLUR"})},onClick(y){y.defaultPrevented||k(y)||f||(B()&&y.currentTarget.focus(),a({type:"TAB_CLICK",value:u}))}})},getContentProps(r){let{value:u}=r,f=s.get("value")===u;return t.element({...V.content.attrs,dir:i("dir"),id:P(n,u),tabIndex:S?0:-1,"aria-labelledby":m(n,u),role:"tabpanel","data-ownedby":C(n),"data-selected":p(f),"data-orientation":i("orientation"),hidden:!f})},getIndicatorProps(){let r=s.get("indicatorRect"),u=r==null||r.width===0&&r.height===0&&r.x===0&&r.y===0;return t.element({id:ae(n),...V.indicator.attrs,dir:i("dir"),"data-orientation":i("orientation"),hidden:u,style:{"--transition-property":"left, right, top, bottom, width, height","--left":T(r?.x),"--top":T(r?.y),"--width":T(r?.width),"--height":T(r?.height),position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:"var(--transition-duration, 150ms)",transitionTimingFunction:"var(--transition-timing-function)",[h?"left":"top"]:h?"var(--left)":"var(--top)"}})}}}var{createMachine:pe}=G(),ie=pe({props({props:e}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(t){U(t.node)},defaultValue:null,...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(o){e("onValueChange")?.({value:o})}})),focusedValue:t(()=>({defaultValue:e("value")||e("defaultValue"),sync:!0,onChange(o){e("onFocusChange")?.({focusedValue:o})}})),ssr:t(()=>({defaultValue:!0})),indicatorRect:t(()=>({defaultValue:null}))}},watch({context:e,prop:t,track:o,action:a}){o([()=>e.get("value")],()=>{a(["syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),o([()=>t("dir"),()=>t("orientation")],()=>{a(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:e})=>e("activationMode")==="automatic"},actions:{selectFocusedTab({context:e,prop:t}){b(()=>{let o=e.get("focusedValue");if(!o)return;let s=t("deselectable")&&e.get("value")===o?null:o;e.set("value",s)})},setFocusedValue({context:e,event:t,flush:o}){t.value!=null&&o(()=>{e.set("focusedValue",t.value)})},clearFocusedValue({context:e}){e.set("focusedValue",null)},setValue({context:e,event:t,prop:o}){let a=o("deselectable")&&e.get("value")===e.get("focusedValue");e.set("value",a?null:t.value)},clearValue({context:e}){e.set("value",null)},focusFirstTab({scope:e}){b(()=>{ce(e)?.focus()})},focusLastTab({scope:e}){b(()=>{de(e)?.focus()})},focusNextTab({context:e,prop:t,scope:o,event:a}){let s=a.value??e.get("focusedValue");if(!s)return;let i=ge(o,{value:s,loopFocus:t("loopFocus")});b(()=>{t("composite")?i?.focus():i?.dataset.value!=null&&e.set("focusedValue",i.dataset.value)})},focusPrevTab({context:e,prop:t,scope:o,event:a}){let s=a.value??e.get("focusedValue");if(!s)return;let i=fe(o,{value:s,loopFocus:t("loopFocus")});b(()=>{t("composite")?i?.focus():i?.dataset.value!=null&&e.set("focusedValue",i.dataset.value)})},syncTabIndex({context:e,scope:t}){b(()=>{let o=e.get("value");if(!o)return;let a=ue(t,o);if(!a)return;x(a).length>0?a.removeAttribute("tabindex"):a.setAttribute("tabindex","0")})},cleanupObserver({refs:e}){let t=e.get("indicatorCleanup");t&&t()},setIndicatorRect({context:e,event:t,scope:o}){let a=t.id??e.get("value");!te(o)||!a||!R(o,a)||e.set("indicatorRect",ve(o,a))},syncSsr({context:e}){e.set("ssr",!1)},syncIndicatorRect({context:e,refs:t,scope:o}){let a=t.get("indicatorCleanup");if(a&&a(),!te(o))return;let i=()=>{let d=R(o,e.get("value"));if(!d)return;let g=oe(d);e.set("indicatorRect",h=>Y(h,g)?h:g)};i();let n=E(o),l=J(...n.map(d=>X.observe(d,i)));t.set("indicatorCleanup",l)},navigateIfNeeded({context:e,prop:t,scope:o}){let a=e.get("value");if(!a)return;let s=R(o,a);O(s)&&t("navigate")?.({value:a,node:s,href:s.href})}}}}),he=I()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]),Ie=A(he),be=I()(["disabled","value"]),Re=A(be),me=I()(["value"]),_e=A(me);var _=class extends ee{initMachine(t){return new Z(ie,t)}initApi(){return se(this.machine.service,Q)}render(){let t=this.el.querySelector('[data-scope="tabs"][data-part="root"]');if(!t)return;this.spreadProps(t,this.api.getRootProps());let o=t.querySelector('[data-scope="tabs"][data-part="list"]');if(!o)return;this.spreadProps(o,this.api.getListProps());let a=this.el.getAttribute("data-items"),s=a?JSON.parse(a):[],i=o.querySelectorAll('[data-scope="tabs"][data-part="trigger"]');for(let l=0;l<i.length&&l<s.length;l++){let d=i[l],g=s[l];this.spreadProps(d,this.api.getTriggerProps({value:g.value,disabled:g.disabled}))}let n=t.querySelectorAll('[data-scope="tabs"][data-part="content"]');for(let l=0;l<n.length&&l<s.length;l++){let d=n[l],g=s[l];this.spreadProps(d,this.api.getContentProps({value:g.value}))}}};var Be={mounted(){let e=this.el,t=this.pushEvent.bind(this),o=new _(e,{id:e.id,...F(e,"controlled")?{value:c(e,"value")}:{defaultValue:c(e,"defaultValue")},orientation:c(e,"orientation",["horizontal","vertical"]),dir:c(e,"dir",["ltr","rtl"]),onValueChange:a=>{let s=c(e,"onValueChange");s&&this.liveSocket.main.isConnected()&&t(s,{id:e.id,value:a.value??null});let i=c(e,"onValueChangeClient");i&&e.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{id:e.id,value:a.value??null}}))},onFocusChange:a=>{let s=c(e,"onFocusChange");s&&this.liveSocket.main.isConnected()&&t(s,{id:e.id,value:a.focusedValue??null});let i=c(e,"onFocusChangeClient");i&&e.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{id:e.id,value:a.focusedValue??null}}))}});o.init(),this.tabs=o,this.onSetValue=a=>{let{value:s}=a.detail;o.api.setValue(s)},e.addEventListener("phx:tabs:set-value",this.onSetValue),this.handlers=[],this.handlers.push(this.handleEvent("tabs_set_value",a=>{let s=a.tabs_id;s&&s!==e.id||o.api.setValue(a.value)})),this.handlers.push(this.handleEvent("tabs_value",()=>{this.pushEvent("tabs_value_response",{value:o.api.value})})),this.handlers.push(this.handleEvent("tabs_focused_value",()=>{this.pushEvent("tabs_focused_value_response",{value:o.api.focusedValue})}))},updated(){this.tabs?.updateProps({id:this.el.id,...F(this.el,"controlled")?{value:c(this.el,"value")}:{defaultValue:c(this.el,"defaultValue")},orientation:c(this.el,"orientation",["horizontal","vertical"]),dir:c(this.el,"dir",["ltr","rtl"])})},destroyed(){if(this.onSetValue&&this.el.removeEventListener("phx:tabs:set-value",this.onSetValue),this.handlers)for(let e of this.handlers)this.removeHandleEvent(e);this.tabs?.destroy()}};export{Be as Tabs};
