import{b as ot}from"./chunk-5MNNWH4C.mjs";import"./chunk-L4HS2GN2.mjs";import{Bb as N,Cb as V,Db as W,Fb as U,Hb as B,Ib as $,Jb as S,P as w,Va as A,Za as G,a as z,aa as Z,ba as L,c as Q,d as P,k as J,lb as tt,pb as C,qb as et,tb as st,wb as it,xb as rt}from"./chunk-IYURAQ6S.mjs";var Tt=z("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),x=Tt.build(),vt=t=>`toast-group:${t}`,nt=(t,e)=>t.getById(`toast-group:${e}`),pt=t=>`toast:${t.id}`,at=t=>t.getById(pt(t)),ct=t=>`toast:${t.id}:title`,lt=t=>`toast:${t.id}:description`,Et=t=>`toast${t.id}:close`,ut={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function _(t,e){return t??ut[e]??ut.DEFAULT}var bt=t=>typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t;function It(t,e){let{prop:i,computed:s,context:r}=t,{offsets:n,gap:l}=i("store").attrs,u=r.get("heights"),d=bt(n),y=i("dir")==="rtl",g=e.replace("-start",y?"-right":"-left").replace("-end",y?"-left":"-right"),a=g.includes("right"),p=g.includes("left"),h={position:"fixed",pointerEvents:s("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${l}px`,"--first-height":`${u[0]?.height||0}px`,"--viewport-offset-left":d.left,"--viewport-offset-right":d.right,"--viewport-offset-top":d.top,"--viewport-offset-bottom":d.bottom,zIndex:Q},f="center";if(a&&(f="flex-end"),p&&(f="flex-start"),h.alignItems=f,g.includes("top")){let T=d.top;h.top=`max(env(safe-area-inset-top, 0px), ${T})`}if(g.includes("bottom")){let T=d.bottom;h.bottom=`max(env(safe-area-inset-bottom, 0px), ${T})`}if(!g.includes("left")){let T=d.right;h.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${T})`}if(!g.includes("right")){let T=d.left;h.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${T})`}return h}function St(t,e){let{prop:i,context:s,computed:r}=t,n=i("parent"),l=n.computed("placement"),{gap:u}=n.prop("store").attrs,[d]=l.split("-"),y=s.get("mounted"),g=s.get("remainingTime"),a=r("height"),p=r("frontmost"),h=!p,f=!i("stacked"),T=i("stacked"),D=i("type")==="loading"?Number.MAX_SAFE_INTEGER:g,H=r("heightIndex")*u+r("heightBefore"),O={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${i("removeDelay")}ms`,"--duration":`${D}ms`,"--initial-height":`${a}px`,"--offset":`${H}px`,"--index":i("index"),"--z-index":r("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},m=Y=>Object.assign(O,Y);return d==="top"?m({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):d==="bottom"&&m({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),y&&(m({"--y":"0","--opacity":"1"}),T&&m({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),e||m({"--opacity":"0",pointerEvents:"none"}),h&&f&&(m({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),e||m({"--y":"calc(var(--sign) * 40%)"})),h&&T&&!e&&m({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),p&&!e&&m({"--y":"calc(var(--lift) * -100%)"}),O}function Pt(t,e){let{computed:i}=t,s={position:"absolute",inset:"0",scale:"1 2",pointerEvents:e?"none":"auto"},r=n=>Object.assign(s,n);return i("frontmost")&&!e&&r({height:"calc(var(--initial-height) + 80%)"}),s}function xt(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function Mt(t,e){let{context:i,prop:s,send:r,refs:n,computed:l}=t;return{getCount(){return i.get("toasts").length},getToasts(){return i.get("toasts")},getGroupProps(u={}){let{label:d="Notifications"}=u,{hotkey:y}=s("store").attrs,g=y.join("+").replace(/Key/g,"").replace(/Digit/g,""),a=l("placement"),[p,h="center"]=a.split("-");return e.element({...x.group.attrs,dir:s("dir"),tabIndex:-1,"aria-label":`${a} ${d} ${g}`,id:vt(a),"data-placement":a,"data-side":p,"data-align":h,"aria-live":"polite",role:"region",style:It(t,a),onMouseEnter(){n.get("ignoreMouseTimer").isActive()||r({type:"REGION.POINTER_ENTER",placement:a})},onMouseMove(){n.get("ignoreMouseTimer").isActive()||r({type:"REGION.POINTER_ENTER",placement:a})},onMouseLeave(){n.get("ignoreMouseTimer").isActive()||r({type:"REGION.POINTER_LEAVE",placement:a})},onFocus(f){r({type:"REGION.FOCUS",target:f.relatedTarget})},onBlur(f){n.get("isFocusWithin")&&!J(f.currentTarget,f.relatedTarget)&&queueMicrotask(()=>r({type:"REGION.BLUR"}))}})},subscribe(u){return s("store").subscribe(()=>u(i.get("toasts")))}}}var{guards:Ot,createMachine:kt}=rt(),{and:At}=Ot,Rt=kt({props({props:t}){return{dir:"ltr",id:G(),...t,store:t.store}},initialState({prop:t}){return t("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,isPointerWithin:!1,ignoreMouseTimer:Z.create(),dismissableCleanup:void 0}},context({bindable:t}){return{toasts:t(()=>({defaultValue:[],sync:!0,hash:e=>e.map(i=>i.id).join(",")})),heights:t(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:t})=>t.get("toasts").length,overlap:({prop:t})=>t("store").attrs.overlap,placement:({prop:t})=>t("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:t,context:e,action:i}){t([()=>e.hash("toasts")],()=>{queueMicrotask(()=>{i(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl","clearMouseEventTimer"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:At("isOverlapping","isPointerOut"),target:"overlap",actions:["collapseToasts","resumeToasts","restoreFocusIfPointerOut"]},{guard:"isPointerOut",target:"stack",actions:["resumeToasts","restoreFocusIfPointerOut"]},{actions:["clearFocusWithin"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight","ignoreMouseEventsTemporarily"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["clearPointerWithin","resumeToasts","collapseToasts"]},{actions:["clearPointerWithin","resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["setPointerWithin","pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["setPointerWithin","pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:t})=>t("overlap"),isPointerOut:({refs:t})=>!t.get("isPointerWithin")},effects:{subscribeToStore({context:t,prop:e}){let i=e("store");return t.set("toasts",i.getVisibleToasts()),i.subscribe(s=>{if(s.dismiss){t.set("toasts",r=>r.filter(n=>n.id!==s.id));return}t.set("toasts",r=>{let n=r.findIndex(l=>l.id===s.id);return n!==-1?[...r.slice(0,n),{...r[n],...s},...r.slice(n+1)]:[s,...r]})})},trackHotKeyPress({prop:t,send:e}){return w(document,"keydown",s=>{let{hotkey:r}=t("store").attrs;r.every(l=>s[l]||s.code===l)&&e({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:t,send:e,scope:i}){let{pauseOnPageIdle:s}=t("store").attrs;if(!s)return;let r=i.getDoc();return w(r,"visibilitychange",()=>{let n=r.visibilityState==="hidden";e({type:n?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:t,context:e,computed:i,scope:s}){let r=e.get("toasts"),n=i("placement"),l=r.length>0;if(!l){t.get("dismissableCleanup")?.();return}if(l&&t.get("dismissableCleanup"))return;let d=ot(()=>nt(s,n),{defer:!0});t.set("dismissableCleanup",d)},clearDismissableBranch({refs:t}){t.get("dismissableCleanup")?.()},focusRegionEl({scope:t,computed:e}){queueMicrotask(()=>{nt(t,e("placement"))?.focus()})},pauseToasts({prop:t}){t("store").pause()},resumeToasts({prop:t}){t("store").resume()},expandToasts({prop:t}){t("store").expand()},collapseToasts({prop:t}){t("store").collapse()},removeToast({prop:t,event:e}){t("store").remove(e.id)},removeHeight({event:t,context:e}){t?.id!=null&&queueMicrotask(()=>{e.set("heights",i=>i.filter(s=>s.id!==t.id))})},collapsedIfEmpty({send:t,computed:e}){!e("overlap")||e("count")>1||t({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:t,event:e}){t.get("isFocusWithin")||!e.target||(t.set("isFocusWithin",!0),t.set("lastFocusedEl",e.target))},restoreFocusIfPointerOut({refs:t}){!t.get("lastFocusedEl")||t.get("isPointerWithin")||(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},setPointerWithin({refs:t}){t.set("isPointerWithin",!0)},clearPointerWithin({refs:t}){t.set("isPointerWithin",!1),t.get("lastFocusedEl")&&!t.get("isFocusWithin")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null))},clearFocusWithin({refs:t}){t.set("isFocusWithin",!1)},clearLastFocusedEl({refs:t}){t.get("lastFocusedEl")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},ignoreMouseEventsTemporarily({refs:t}){t.get("ignoreMouseTimer").request()},clearMouseEventTimer({refs:t}){t.get("ignoreMouseTimer").cancel()}}}});function gt(t,e){let{state:i,send:s,prop:r,scope:n,context:l,computed:u}=t,d=i.hasTag("visible"),y=i.hasTag("paused"),g=l.get("mounted"),a=u("frontmost"),p=r("parent").computed("placement"),h=r("type"),f=r("stacked"),T=r("title"),R=r("description"),D=r("action"),[H,O="center"]=p.split("-");return{type:h,title:T,description:R,placement:p,visible:d,paused:y,closable:!!r("closable"),pause(){s({type:"PAUSE"})},resume(){s({type:"RESUME"})},dismiss(){s({type:"DISMISS",src:"programmatic"})},getRootProps(){return e.element({...x.root.attrs,dir:r("dir"),id:pt(n),"data-state":d?"open":"closed","data-type":h,"data-placement":p,"data-align":O,"data-side":H,"data-mounted":P(g),"data-paused":P(y),"data-first":P(a),"data-sibling":P(!a),"data-stack":P(f),"data-overlap":P(!f),role:"status","aria-atomic":"true","aria-describedby":R?lt(n):void 0,"aria-labelledby":T?ct(n):void 0,tabIndex:0,style:St(t,d),onKeyDown(m){m.defaultPrevented||m.key=="Escape"&&(s({type:"DISMISS",src:"keyboard"}),m.preventDefault())}})},getGhostBeforeProps(){return e.element({"data-ghost":"before",style:Pt(t,d)})},getGhostAfterProps(){return e.element({"data-ghost":"after",style:xt()})},getTitleProps(){return e.element({...x.title.attrs,id:ct(n)})},getDescriptionProps(){return e.element({...x.description.attrs,id:lt(n)})},getActionTriggerProps(){return e.button({...x.actionTrigger.attrs,type:"button",onClick(m){m.defaultPrevented||(D?.onClick?.(),s({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return e.button({id:Et(n),...x.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(m){m.defaultPrevented||s({type:"DISMISS",src:"user"})}})}}}var{not:Dt}=it(),ht={props({props:t}){return st(t,["id","type","parent","removeDelay"],"toast"),{closable:!0,...t,duration:_(t.duration,t.type)}},initialState({prop:t}){return t("type")==="loading"||t("duration")===1/0?"visible:persist":"visible"},context({prop:t,bindable:e}){return{remainingTime:e(()=>({defaultValue:_(t("duration"),t("type"))})),createdAt:e(()=>({defaultValue:Date.now()})),mounted:e(()=>({defaultValue:!1})),initialHeight:e(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:t})=>{let e=t("parent").context.get("toasts"),i=e.findIndex(s=>s.id===t("id"));return e.length-i},height:({prop:t})=>t("parent").context.get("heights").find(s=>s.id===t("id"))?.height??0,heightIndex:({prop:t})=>t("parent").context.get("heights").findIndex(i=>i.id===t("id")),frontmost:({prop:t})=>t("index")===0,heightBefore:({prop:t})=>{let e=t("parent").context.get("heights"),i=e.findIndex(s=>s.id===t("id"));return e.reduce((s,r,n)=>n>=i?s:s+r.height,0)},shouldPersist:({prop:t})=>t("type")==="loading"||t("duration")===1/0},watch({track:t,prop:e,send:i}){t([()=>e("message")],()=>{let s=e("message");s&&i({type:s,src:"programmatic"})}),t([()=>e("type"),()=>e("duration")],()=>{i({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:Dt("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:t,send:e}){return C(()=>{e({type:"REMOVE",src:"timer"})},t("removeDelay"))},waitForDuration({send:t,context:e,computed:i}){if(!i("shouldPersist"))return C(()=>{t({type:"DISMISS",src:"timer"})},e.get("remainingTime"))},waitForNextTick({send:t}){return C(()=>{t({type:"SHOW",src:"timer"})},0)},trackHeight({scope:t,prop:e}){let i;return L(()=>{let s=at(t);if(!s)return;let r=()=>{let u=s.style.height;s.style.height="auto";let d=s.getBoundingClientRect().height;s.style.height=u;let y={id:e("id"),height:d};dt(e("parent"),y)},n=t.getWin(),l=new n.MutationObserver(r);l.observe(s,{childList:!0,subtree:!0,characterData:!0}),i=()=>l.disconnect()}),()=>i?.()}},guards:{isLoadingType:({prop:t})=>t("type")==="loading",shouldPersist:({computed:t})=>t("shouldPersist")},actions:{setMounted({context:t}){L(()=>{t.set("mounted",!0)})},measureHeight({scope:t,prop:e,context:i}){queueMicrotask(()=>{let s=at(t);if(!s)return;let r=s.style.height;s.style.height="auto";let n=s.getBoundingClientRect().height;s.style.height=r,i.set("initialHeight",n);let l={id:e("id"),height:n};dt(e("parent"),l)})},setCloseTimer({refs:t}){t.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:t,refs:e,prop:i}){e.set("closeTimerStartTime",Date.now()),t.set("remainingTime",_(i("duration"),i("type")))},syncRemainingTime({context:t,refs:e}){t.set("remainingTime",i=>{let s=e.get("closeTimerStartTime"),r=Date.now()-s;return e.set("lastCloseStartTimerStartTime",Date.now()),i-r})},notifyParentToRemove({prop:t}){t("parent").send({type:"TOAST.REMOVE",id:t("id")})},invokeOnDismiss({prop:t,event:e}){t("onStatusChange")?.({status:"dismissing",src:e.src})},invokeOnUnmount({prop:t}){t("onStatusChange")?.({status:"unmounted"})},invokeOnVisible({prop:t}){t("onStatusChange")?.({status:"visible"})}}}};function dt(t,e){let{id:i,height:s}=e;t.context.set("heights",r=>r.find(l=>l.id===i)?r.map(l=>l.id===i?{...l,height:s}:l):[{id:i,height:s},...r])}var Ht=(t,e)=>({...e,...tt(t)});function mt(t={}){let e=Ht(t,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0}),i=[],s=[],r=new Set,n=[],l=o=>(i.push(o),()=>{let c=i.indexOf(o);i.splice(c,1)}),u=o=>(i.forEach(c=>c(o)),o),d=o=>{if(s.length>=e.max){n.push(o);return}u(o),s.unshift(o)},y=()=>{for(;n.length>0&&s.length<e.max;){let o=n.shift();o&&(u(o),s.unshift(o))}},g=o=>{let c=o.id??`toast:${G()}`,b=s.find(v=>v.id===c);return r.has(c)&&r.delete(c),b?s=s.map(v=>v.id===c?u({...v,...o,id:c}):v):d({id:c,duration:e.duration,removeDelay:e.removeDelay,type:"info",...o,stacked:!e.overlap,gap:e.gap}),c},a=o=>(r.add(o),o?(i.forEach(c=>c({id:o,dismiss:!0})),s=s.filter(c=>c.id!==o),y()):(s.forEach(c=>{i.forEach(b=>b({id:c.id,dismiss:!0}))}),s=[],n=[]),o);return{attrs:e,subscribe:l,create:g,update:(o,c)=>g({id:o,...c}),remove:a,dismiss:o=>{o!=null?s=s.map(c=>c.id===o?u({...c,message:"DISMISS"}):c):s=s.map(c=>u({...c,message:"DISMISS"}))},error:o=>g({...o,type:"error"}),success:o=>g({...o,type:"success"}),info:o=>g({...o,type:"info"}),warning:o=>g({...o,type:"warning"}),loading:o=>g({...o,type:"loading"}),getVisibleToasts:()=>s.filter(o=>!r.has(o.id)),getCount:()=>s.length,promise:(o,c,b={})=>{if(!c||!c.loading){et("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}let v=g({...b,...c.loading,promise:o,type:"loading"}),F=!0,k,yt=A(o).then(async E=>{if(k=["resolve",E],Ft(E)&&!E.ok){F=!1;let I=A(c.error,`HTTP Error! status: ${E.status}`);g({...b,...I,id:v,type:"error"})}else if(c.success!==void 0){F=!1;let I=A(c.success,E);g({...b,...I,id:v,type:"success"})}}).catch(async E=>{if(k=["reject",E],c.error!==void 0){F=!1;let I=A(c.error,E);g({...b,...I,id:v,type:"error"})}}).finally(()=>{F&&a(v),c.finally?.()});return{id:v,unwrap:()=>new Promise((E,I)=>yt.then(()=>k[0]==="reject"?I(k[1]):E(k[1])).catch(I))}},pause:o=>{o!=null?s=s.map(c=>c.id===o?u({...c,message:"PAUSE"}):c):s=s.map(c=>u({...c,message:"PAUSE"}))},resume:o=>{o!=null?s=s.map(c=>c.id===o?u({...c,message:"RESUME"}):c):s=s.map(c=>u({...c,message:"RESUME"}))},isVisible:o=>!r.has(o)&&!!s.find(c=>c.id===o),isDismissed:o=>r.has(o),expand:()=>{s=s.map(o=>u({...o,stacked:!0}))},collapse:()=>{s=s.map(o=>u({...o,stacked:!1}))}}}var Ft=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",q={connect:Mt,machine:Rt};var Ct=new Map,j=new Map,K=class extends W{parts;duration;constructor(e,i){super(e,i),this.duration=i.duration,this.el.setAttribute("data-scope","toast"),this.el.setAttribute("data-part","root"),this.el.innerHTML=`
      <span data-scope="toast" data-part="ghost-before"></span>
      <div data-scope="toast" data-part="progressbar"></div>
      <div data-scope="toast" data-part="loading-spinner" style="display: none;"></div>

      <div data-scope="toast" data-part="content">
        <div data-scope="toast" data-part="title"></div>
        <div data-scope="toast" data-part="description"></div>
      </div>

      <button data-scope="toast" data-part="close-trigger">
        <svg viewBox="0 0 20 20" aria-hidden="true">
          <path d="M4.293 4.293 10 8.586l5.707-5.707 1.414 1.414L11.414 10l5.707 5.707-1.414 1.414L10 11.414l-5.707 5.707-1.414-1.414L8.586 10 2.879 4.293z"/>
        </svg>
      </button>

      <span data-scope="toast" data-part="ghost-after"></span>
    `,this.parts={title:this.el.querySelector('[data-scope="toast"][data-part="title"]'),description:this.el.querySelector('[data-scope="toast"][data-part="description"]'),close:this.el.querySelector('[data-scope="toast"][data-part="close-trigger"]'),ghostBefore:this.el.querySelector('[data-scope="toast"][data-part="ghost-before"]'),ghostAfter:this.el.querySelector('[data-scope="toast"][data-part="ghost-after"]'),progressbar:this.el.querySelector('[data-scope="toast"][data-part="progressbar"]'),loadingSpinner:this.el.querySelector('[data-scope="toast"][data-part="loading-spinner"]')}}initMachine(e){return new V(ht,e)}initApi(){return gt(this.machine.service,N)}render(){this.spreadProps(this.el,this.api.getRootProps()),this.spreadProps(this.parts.close,this.api.getCloseTriggerProps()),this.spreadProps(this.parts.ghostBefore,this.api.getGhostBeforeProps()),this.spreadProps(this.parts.ghostAfter,this.api.getGhostAfterProps()),this.parts.title.textContent!==this.api.title&&(this.parts.title.textContent=this.api.title??""),this.parts.description.textContent!==this.api.description&&(this.parts.description.textContent=this.api.description??""),this.spreadProps(this.parts.title,this.api.getTitleProps()),this.spreadProps(this.parts.description,this.api.getDescriptionProps());let e=this.duration,i=e==="Infinity"||e===1/0||e===Number.POSITIVE_INFINITY,n=this.el.closest('[phx-hook="Toast"]')?.querySelector("[data-loading-icon-template]")?.innerHTML;i?(this.parts.progressbar.style.display="none",this.parts.loadingSpinner.style.display="flex",this.el.setAttribute("data-duration-infinity","true"),n&&this.parts.loadingSpinner.innerHTML!==n&&(this.parts.loadingSpinner.innerHTML=n)):(this.parts.progressbar.style.display="block",this.parts.loadingSpinner.style.display="none",this.el.removeAttribute("data-duration-infinity"))}destroy=()=>{this.machine.stop(),this.el.remove()}},X=class extends W{toastComponents=new Map;groupEl;store;constructor(e,i){super(e,i),this.store=i.store,this.groupEl=e.querySelector('[data-part="group"]')??(()=>{let s=document.createElement("div");return s.setAttribute("data-scope","toast"),s.setAttribute("data-part","group"),e.appendChild(s),s})()}initMachine(e){return new V(q.machine,e)}initApi(){return q.connect(this.machine.service,N)}render(){this.spreadProps(this.groupEl,this.api.getGroupProps());let e=this.api.getToasts().filter(s=>typeof s.id=="string"),i=new Set(e.map(s=>s.id));e.forEach((s,r)=>{let n=this.toastComponents.get(s.id);if(n)n.duration=s.duration,n.updateProps({...s,parent:this.machine.service,index:r});else{let l=document.createElement("div");l.setAttribute("data-scope","toast"),l.setAttribute("data-part","root"),this.groupEl.appendChild(l),n=new K(l,{...s,parent:this.machine.service,index:r}),n.init(),this.toastComponents.set(s.id,n)}});for(let[s,r]of this.toastComponents)i.has(s)||(r.destroy(),this.toastComponents.delete(s))}destroy=()=>{for(let e of this.toastComponents.values())e.destroy();this.toastComponents.clear(),this.machine.stop()}};function ft(t,e){let i=e?.id??S(t,"toast"),s=e?.store??mt({placement:e?.placement??"bottom",overlap:e?.overlap,max:e?.max,gap:e?.gap,offsets:e?.offsets,pauseOnPageIdle:e?.pauseOnPageIdle}),r=new X(t,{id:i,store:s});return r.init(),Ct.set(i,r),j.set(i,s),t.dataset.toastGroup="true",t.dataset.toastGroupId=i,{group:r,store:s}}function M(t){if(t)return j.get(t);let e=document.querySelector("[data-toast-group]");if(!e)return;let i=e.dataset.toastGroupId||e.id;return i?j.get(i):void 0}var se={mounted(){let t=this.el;t.id||(t.id=S(t,"toast")),this.groupId=t.id;let e=a=>{if(a)try{return a.includes("{")?JSON.parse(a):a}catch{return a}},i=a=>a==="Infinity"||a===1/0?1/0:typeof a=="string"?parseInt(a,10)||void 0:a,s=U(t,"placement",["top-start","top","top-end","bottom-start","bottom","bottom-end"])??"bottom-end";ft(t,{id:this.groupId,placement:s,overlap:$(t,"overlap"),max:B(t,"max"),gap:B(t,"gap"),offsets:e(U(t,"offset")),pauseOnPageIdle:$(t,"pauseOnPageIdle")});let r=M(this.groupId),n=t.getAttribute("data-flash-info"),l=t.getAttribute("data-flash-info-title"),u=t.getAttribute("data-flash-error"),d=t.getAttribute("data-flash-error-title"),y=t.getAttribute("data-flash-info-duration"),g=t.getAttribute("data-flash-error-duration");if(r&&n)try{r.create({title:l||"Success",description:n,type:"info",id:S(void 0,"toast"),duration:i(y??void 0)})}catch(a){console.error("Failed to create flash info toast:",a)}if(r&&u)try{r.create({title:d||"Error",description:u,type:"error",id:S(void 0,"toast"),duration:i(g??void 0)})}catch(a){console.error("Failed to create flash error toast:",a)}this.handlers=[],this.handlers.push(this.handleEvent("toast-create",a=>{let p=M(a.groupId||this.groupId);if(p)try{p.create({title:a.title,description:a.description,type:a.type||"info",id:a.id||S(void 0,"toast"),duration:i(a.duration)})}catch(h){console.error("Failed to create toast:",h)}})),this.handlers.push(this.handleEvent("toast-update",a=>{let p=M(a.groupId||this.groupId);if(p)try{p.update(a.id,{title:a.title,description:a.description,type:a.type})}catch(h){console.error("Failed to update toast:",h)}})),this.handlers.push(this.handleEvent("toast-dismiss",a=>{let p=M(a.groupId||this.groupId);if(p)try{p.dismiss(a.id)}catch(h){console.error("Failed to dismiss toast:",h)}})),t.addEventListener("toast:create",a=>{let{detail:p}=a,h=M(p.groupId||this.groupId);if(h)try{h.create({title:p.title,description:p.description,type:p.type||"info",id:p.id||S(void 0,"toast"),duration:i(p.duration)})}catch(f){console.error("Failed to create toast:",f)}})},destroyed(){if(this.handlers)for(let t of this.handlers)this.removeHandleEvent(t)}};export{se as Toast};
